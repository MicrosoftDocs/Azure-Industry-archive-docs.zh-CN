---
title: 将电子商务解决方案迁移到 Azure 的概述
author: scseely
ms.author: scseely, mazoroto
ms.date: 07/16/2018
ms.topic: article
ms.service: industry
description: 本文介绍了将电子商务基础结构从本地迁移到 Azure 的阶段。
ms.openlocfilehash: 847950673475f7f59a0c8c8c8bfc821414b2cc77
ms.sourcegitcommit: 76f2862adbec59311b5888e043a120f89dc862af
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/03/2018
ms.locfileid: "51654264"
---
# <a name="migrating-your-e-commerce-solution-to-azure-overview"></a><span data-ttu-id="53b2b-103">将电子商务解决方案迁移到 Azure 的概述</span><span class="sxs-lookup"><span data-stu-id="53b2b-103">Migrating your e-commerce solution to Azure overview</span></span>

## <a name="introduction"></a><span data-ttu-id="53b2b-104">介绍</span><span class="sxs-lookup"><span data-stu-id="53b2b-104">Introduction</span></span>

<span data-ttu-id="53b2b-105">将现有电子商务解决方案移动到云为企业带来了许多好处：支持可伸缩性，可供客户全天候访问，以及更易于集成云服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-105">Moving an existing e-commerce solution to the cloud presents many benefits for an enterprise: it enables scalability, it offers customers 24/7 accessibility, and it becomes easier to integrate cloud services.</span></span> <span data-ttu-id="53b2b-106">但首先，将电子商务解决方案移动到云是一项重要任务，决策者必须了解所需花费的成本。</span><span class="sxs-lookup"><span data-stu-id="53b2b-106">But first, to move an e-commerce solution to the cloud is a significant task, with costs that must be understood by a decision maker.</span></span> <span data-ttu-id="53b2b-107">本文档介绍 Azure 迁移的范围，目的在于告知你相关选项。</span><span class="sxs-lookup"><span data-stu-id="53b2b-107">This document explains the scope of an Azure migration with the goal of informing you of the options.</span></span> <span data-ttu-id="53b2b-108">在第一阶段中，IT 专业人员先将组件移动到云。</span><span class="sxs-lookup"><span data-stu-id="53b2b-108">The first phase begins with IT Pros moving the components to the cloud.</span></span> <span data-ttu-id="53b2b-109">一旦移动到 Azure，我们即可介绍电子商务团队可用来增加 ROI 并充分利用云的步骤。</span><span class="sxs-lookup"><span data-stu-id="53b2b-109">Once on Azure, we describe the steps the e-commerce team can take to increase ROI and take advantage of the cloud.</span></span>

<span data-ttu-id="53b2b-110">**处在抉择关头**</span><span class="sxs-lookup"><span data-stu-id="53b2b-110">**At the crossroads**</span></span>

<span data-ttu-id="53b2b-111">虽然全球电子商务交易只占零售总额的一小部分，但渠道仍认为它会逐年稳步增长。</span><span class="sxs-lookup"><span data-stu-id="53b2b-111">Although global e-commerce transactions account for only a fraction of total retail sales, the channel continues to see steady year-over-year growth.</span></span> <span data-ttu-id="53b2b-112">在 2017 年，电子商务占零售总额的 10.2%，与 2016 年（[源](https://www.emarketer.com/Report/Worldwide-Retail-Ecommerce-Sales-eMarketers-Updated-Forecast-New-Mcommerce-Estimates-20162021/2002182)）的 8.6% 相比有所提高。</span><span class="sxs-lookup"><span data-stu-id="53b2b-112">In 2017, e-commerce constituted 10.2% of total retail sales, up from 8.6% in 2016 ( [source](https://www.emarketer.com/Report/Worldwide-Retail-Ecommerce-Sales-eMarketers-Updated-Forecast-New-Mcommerce-Estimates-20162021/2002182)).</span></span> <span data-ttu-id="53b2b-113">随着电子商务趋于成熟，以及云计算的问世，零售商正处在抉择关头。</span><span class="sxs-lookup"><span data-stu-id="53b2b-113">As e-commerce has matured, along with the advent of cloud computing, retailers are at a crossroads.</span></span>  <span data-ttu-id="53b2b-114">需要做出选择。</span><span class="sxs-lookup"><span data-stu-id="53b2b-114">There are choices to make.</span></span> <span data-ttu-id="53b2b-115">他们可以借助可能随着技术不断发展而生成的新功能构建其业务模型，也可以根据其当前功能布局计划现代化。</span><span class="sxs-lookup"><span data-stu-id="53b2b-115">They can envision their business model with new capabilities made possible by evolving technology; and they can plan their modernization given their current capability footprint.</span></span>

<span data-ttu-id="53b2b-116">**改进客户旅程**</span><span class="sxs-lookup"><span data-stu-id="53b2b-116">**Improving the customer journey**</span></span>

<span data-ttu-id="53b2b-117">电子商务主要侧重于客户旅程，有许多不同的属性。</span><span class="sxs-lookup"><span data-stu-id="53b2b-117">E-commerce, which is primarily focused on the customer journey, has many different attributes.</span></span> <span data-ttu-id="53b2b-118">这些属性可以分为以下四个主要方面：发现、评估、采购和售后。</span><span class="sxs-lookup"><span data-stu-id="53b2b-118">These attributes can be grouped into four main areas: discovery, evaluation, purchase and post-purchase.</span></span>

<span data-ttu-id="53b2b-119">客户行为作为数据捕获。</span><span class="sxs-lookup"><span data-stu-id="53b2b-119">The customer behavior is captured as data.</span></span> <span data-ttu-id="53b2b-120">购物漏斗图是指向用于查看产品数据、交易、清单、发货、订单履行、客户配置文件、购物车和产品建议等应用程序的连接的集合。</span><span class="sxs-lookup"><span data-stu-id="53b2b-120">And the shopping funnel is a collection of connection points to applications used for viewing product data, transactions, inventory, shipping, order fulfillment, customer profile, shopping cart, and product recommendations to name a few.</span></span>

<span data-ttu-id="53b2b-121">典型的零售业依赖于软件解决方案的大型集合，范围包括从整个堆栈中面向客户的应用程序到基础应用程序。</span><span class="sxs-lookup"><span data-stu-id="53b2b-121">A typical retail business relies on a large collection of software solutions that range from customer-facing applications down through the stack to foundational applications.</span></span>  <span data-ttu-id="53b2b-122">下图显示了典型零售业中提供的功能的视图。</span><span class="sxs-lookup"><span data-stu-id="53b2b-122">The following drawing shows a view of the functionality present in a typical retail business.</span></span>

 ![](./assets/migrating-ecommerce-solution-to-azure/ecommerce-system-sketch.png)

<span data-ttu-id="53b2b-123">云提供了改变组织获取、使用和管理技术的方式的机会。</span><span class="sxs-lookup"><span data-stu-id="53b2b-123">The cloud presents an opportunity to shift how an organization obtains, uses and manages technology.</span></span>  <span data-ttu-id="53b2b-124">其他好处包括：降低了维护数据中心的成本，提升了可靠性和性能，以及灵活地添加其他服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-124">Other benefits include: reduced costs of maintaining data centers, improved reliability and performance, and the flexibility to add other services.</span></span> <span data-ttu-id="53b2b-125">在此用例中，我们会看到零售业可用来将其现有基础结构迁移到 Azure 的方法。</span><span class="sxs-lookup"><span data-stu-id="53b2b-125">In this use case, we look at a path a retail business can take to migrate its existing infrastructure to Azure.</span></span> <span data-ttu-id="53b2b-126">我们也会使用重新托管、重构和重新生成的分阶段方法来充分利用新环境。</span><span class="sxs-lookup"><span data-stu-id="53b2b-126">We also take advantage of the new environment using a phased approach of rehost, refactor and rebuild.</span></span> <span data-ttu-id="53b2b-127">尽管许多组织可能会使用本系列方法实现现代化，但在大多数情况下，组织可以放入任何阶段作为其起点。</span><span class="sxs-lookup"><span data-stu-id="53b2b-127">While many organizations may follow this series path to modernization, in most cases, organizations can drop into any phase as their stating point.</span></span>  <span data-ttu-id="53b2b-128">组织可能会选择放弃在 Azure 上重新托管当前应用程序，而是直接重构甚至重新生成。</span><span class="sxs-lookup"><span data-stu-id="53b2b-128">Organizations may choose to forgo rehosting their current application on Azure, and jump straight to refactor or even rebuild.</span></span>  <span data-ttu-id="53b2b-129">此决策将特定于应用程序和组织，以便最符合其现代化需求。</span><span class="sxs-lookup"><span data-stu-id="53b2b-129">This decision will be unique to the application, and organization to best meet their modernization needs.</span></span>

## <a name="rehost"></a><span data-ttu-id="53b2b-130">重新托管</span><span class="sxs-lookup"><span data-stu-id="53b2b-130">Rehost</span></span>

<span data-ttu-id="53b2b-131">也称为&quot;直接迁移&quot;，此阶段需要将物理服务器和 VM 按原样迁移到云。</span><span class="sxs-lookup"><span data-stu-id="53b2b-131">Also referred to as &quot;lift and shift,&quot; this stage entails migrating physical servers and VMs as-is to the cloud.</span></span> <span data-ttu-id="53b2b-132">通过将当前服务器环境直接迁移到 IaaS，可享有成本节省、安全性和更高可靠性的好处。</span><span class="sxs-lookup"><span data-stu-id="53b2b-132">By simply shifting your current server environment straight to IaaS, you reap the benefits of cost savings, security, and increased reliability.</span></span> <span data-ttu-id="53b2b-133">通过在大小合适的 VM 上运行工作负载等方法可实现节省。</span><span class="sxs-lookup"><span data-stu-id="53b2b-133">The savings come from techniques like running workloads on properly sized VMs.</span></span> <span data-ttu-id="53b2b-134">现在，本地 VM 和物理计算机的功能经常超过零售商的日常需求。</span><span class="sxs-lookup"><span data-stu-id="53b2b-134">Today, the capabilities of on-premises VMs and physical machines frequently exceed the day-to-day needs of retailers.</span></span> <span data-ttu-id="53b2b-135">VM 必须能够处理一年仅出现几次的季节性业务高峰。</span><span class="sxs-lookup"><span data-stu-id="53b2b-135">The VMs must be able to handle seasonal business peaks that occur only a few times a year.</span></span> <span data-ttu-id="53b2b-136">因此，你需要在淡季对未使用的功能付费。</span><span class="sxs-lookup"><span data-stu-id="53b2b-136">Therefore you are paying for unused capabilities during the off-peak season.</span></span> <span data-ttu-id="53b2b-137">借助 Azure，你可以根据当前业务周期的需求选取大小合适的 VM。</span><span class="sxs-lookup"><span data-stu-id="53b2b-137">With Azure, you pick the right sized VM based on demands for the current business cycle.</span></span>

<span data-ttu-id="53b2b-138">若要在 Azure 中重新托管，有以下三个阶段：</span><span class="sxs-lookup"><span data-stu-id="53b2b-138">To rehost in Azure, there are three phases:</span></span>

- <span data-ttu-id="53b2b-139">分析：标识和清点应用程序、工作负载、网络和安全性等本地资源。</span><span class="sxs-lookup"><span data-stu-id="53b2b-139">**Analysis** : Identify and inventory on-premises resources like applications, workloads, networking, and security.</span></span> <span data-ttu-id="53b2b-140">在此阶段结束时，你已完成现有系统的记录。</span><span class="sxs-lookup"><span data-stu-id="53b2b-140">At the end of this phase, you have complete documentation of the existing system.</span></span>
- <span data-ttu-id="53b2b-141">迁移：将每个子系统从本地移动到 Azure。</span><span class="sxs-lookup"><span data-stu-id="53b2b-141">**Migration** : Move each subsystem from on-premises to Azure.</span></span> <span data-ttu-id="53b2b-142">在此阶段中，你会将 Azure 用作数据中心的扩展，并继续与应用程序进行通信。</span><span class="sxs-lookup"><span data-stu-id="53b2b-142">During this stage, you will use Azure as an extension of your data center with the applications continuing to communicate.</span></span>
- <span data-ttu-id="53b2b-143">优化：当系统移动到 Azure 中时，请确保大小合适。</span><span class="sxs-lookup"><span data-stu-id="53b2b-143">**Optimization** : As systems move into Azure, make sure that things are sized properly.</span></span> <span data-ttu-id="53b2b-144">如果环境显示向某些虚拟机分配了过多的资源，请将 VM 类型更改为具有更合适的 CPU、内存和本地存储组合的类型。</span><span class="sxs-lookup"><span data-stu-id="53b2b-144">If the environment shows that too many resources are allocated to some VMs, change the VM type to one that has a more appropriate combination of CPU, memory, and local storage.</span></span>

### <a name="analyze"></a><span data-ttu-id="53b2b-145">分析</span><span class="sxs-lookup"><span data-stu-id="53b2b-145">Analyze</span></span>

<span data-ttu-id="53b2b-146">请执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="53b2b-146">Do the following:</span></span>

1. <span data-ttu-id="53b2b-147">列出本地服务器和应用程序。</span><span class="sxs-lookup"><span data-stu-id="53b2b-147">List the on-premises servers and applications.</span></span> <span data-ttu-id="53b2b-148">此操作依赖代理或管理工具收集有关服务器、服务器上运行的应用程序、当前服务器使用情况以及如何配置服务器及其应用程序的元数据。</span><span class="sxs-lookup"><span data-stu-id="53b2b-148">This relies upon an agent or management tool to gather metadata about the servers, the applications running on the servers, the current server usage, and how the servers and their applications are configured.</span></span> <span data-ttu-id="53b2b-149">此结果是环境中所有服务器和应用程序的报告。</span><span class="sxs-lookup"><span data-stu-id="53b2b-149">This result is a report of all the servers and applications in the environment.</span></span>
1. <span data-ttu-id="53b2b-150">标识依赖项。</span><span class="sxs-lookup"><span data-stu-id="53b2b-150">Identify the dependencies.</span></span> <span data-ttu-id="53b2b-151">可以使用工具标识哪些服务器相互通信，以及相互通信的应用程序。</span><span class="sxs-lookup"><span data-stu-id="53b2b-151">You can use tooling to identify which servers talk to each other, and applications that communicate to each other.</span></span> <span data-ttu-id="53b2b-152">结果是所有应用程序和工作负载的一个或多个映射。</span><span class="sxs-lookup"><span data-stu-id="53b2b-152">The result is a map—or maps—of all applications and workloads.</span></span> <span data-ttu-id="53b2b-153">这些映射将注入迁移规划。</span><span class="sxs-lookup"><span data-stu-id="53b2b-153">These maps feed into migration planning.</span></span>
1. <span data-ttu-id="53b2b-154">分析配置。</span><span class="sxs-lookup"><span data-stu-id="53b2b-154">Analyze the configurations.</span></span> <span data-ttu-id="53b2b-155">目标是了解在 Azure 中运行时需要哪些 VM 类型。</span><span class="sxs-lookup"><span data-stu-id="53b2b-155">The goal is to know what VM types you need once running in Azure.</span></span> <span data-ttu-id="53b2b-156">结果是有关可移动到 Azure 的所有应用程序的报告。</span><span class="sxs-lookup"><span data-stu-id="53b2b-156">The result is a report on all applications that can move to Azure.</span></span> <span data-ttu-id="53b2b-157">可以将其进一步分类为：</span><span class="sxs-lookup"><span data-stu-id="53b2b-157">They can be further classified as having:</span></span>
      1. <span data-ttu-id="53b2b-158">无修改</span><span class="sxs-lookup"><span data-stu-id="53b2b-158">No modifications</span></span>
      1. <span data-ttu-id="53b2b-159">基本修改，如命名更改</span><span class="sxs-lookup"><span data-stu-id="53b2b-159">Basic modifications such as naming changes</span></span>
      1. <span data-ttu-id="53b2b-160">少许修改，如轻微的代码更改</span><span class="sxs-lookup"><span data-stu-id="53b2b-160">Minor modifications, such as a slight code changes</span></span>
      1. <span data-ttu-id="53b2b-161">不兼容的工作负载，需要付出额外努力才能移动</span><span class="sxs-lookup"><span data-stu-id="53b2b-161">Incompatible workloads which require extra effort to move</span></span>
1. <span data-ttu-id="53b2b-162">创建预算。</span><span class="sxs-lookup"><span data-stu-id="53b2b-162">Create your budget.</span></span> <span data-ttu-id="53b2b-163">现在有一个列表，其中枚举了每个 CPU（内存等）以及每个应用程序的要求。</span><span class="sxs-lookup"><span data-stu-id="53b2b-163">You now have a list that enumerates each CPU—memory, and so on—and the requirements for each application.</span></span> <span data-ttu-id="53b2b-164">将这些工作负载放置在大小合适的 VM 上。</span><span class="sxs-lookup"><span data-stu-id="53b2b-164">Place those workloads on properly sized VMs.</span></span> <span data-ttu-id="53b2b-165">云平台根据使用情况对成本进行计费。</span><span class="sxs-lookup"><span data-stu-id="53b2b-165">Cloud platforms bill costs based on usage.</span></span> <span data-ttu-id="53b2b-166">工具存在的原因是将你的需求映射到大小合适的 Azure VM。</span><span class="sxs-lookup"><span data-stu-id="53b2b-166">Tooling exists to map your needs to the right sized Azure VMs.</span></span> <span data-ttu-id="53b2b-167">如果要迁移 Windows VM 或 SQL Server，还应查看可减少 Azure 相关费用的 [Azure 混合权益](https://azure.microsoft.com/pricing/hybrid-benefit/?WT.mc_id=retailecomm-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="53b2b-167">If you are migrating Windows VMs or SQL Server, you should also look at the [Azure Hybrid Benefit](https://azure.microsoft.com/pricing/hybrid-benefit/?WT.mc_id=retailecomm-docs-scseely) which reduces your expenses on Azure.</span></span>

<span data-ttu-id="53b2b-168">Microsoft 提供了多个用来分析和编录系统的工具。</span><span class="sxs-lookup"><span data-stu-id="53b2b-168">Microsoft provides several tools to analyze and catalog your systems.</span></span> <span data-ttu-id="53b2b-169">如果运行 VMWare，则可以使用 [Azure Migrate](/azure/migrate/migrate-overview?WT.mc_id=retailecomm-docs-scseely) 协助进行发现和评估。</span><span class="sxs-lookup"><span data-stu-id="53b2b-169">If you run VMWare, you can use [Azure Migrate](/azure/migrate/migrate-overview?WT.mc_id=retailecomm-docs-scseely) to assist with discovery and assessment.</span></span> <span data-ttu-id="53b2b-170">该工具标识可移动到 Azure 的计算机，建议要运行的 VM 的类型，并估计工作负载的成本。</span><span class="sxs-lookup"><span data-stu-id="53b2b-170">The tool identifies machines that can be moved to Azure, recommends the type of VM to run, and estimates the cost of the workload.</span></span> <span data-ttu-id="53b2b-171">对于 Hyper-V 环境，使用 [Azure Site Recovery 部署规划器](/azure/site-recovery/hyper-v-deployment-planner-overview?WT.mc_id=retailecomm-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="53b2b-171">For Hyper-V environments use [Azure Site Recovery Deployment Planner](/azure/site-recovery/hyper-v-deployment-planner-overview?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="53b2b-172">对于需要移动数百个或更多虚拟机的大型迁移，你可能希望与 [Azure 迁移合作伙伴](https://azure.microsoft.com/migration/partners/?WT.mc_id=retailecomm-docs-scseely)一起合作。</span><span class="sxs-lookup"><span data-stu-id="53b2b-172">For large migrations where you need to move hundreds or more VMs, you may want to work with an [Azure migration partner](https://azure.microsoft.com/migration/partners/?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="53b2b-173">这些合作伙伴在移动工作负载方面拥有专业知识和经验。</span><span class="sxs-lookup"><span data-stu-id="53b2b-173">These partners have the expertise and experience to move your workloads.</span></span>

### <a name="migrate"></a><span data-ttu-id="53b2b-174">迁移</span><span class="sxs-lookup"><span data-stu-id="53b2b-174">Migrate</span></span>

<span data-ttu-id="53b2b-175">开始计划将哪些服务移动到云以及采用哪种顺序。</span><span class="sxs-lookup"><span data-stu-id="53b2b-175">Begin planning which services to move to the cloud and in what order.</span></span> <span data-ttu-id="53b2b-176">由于此阶段涉及移动工作负载，因此请按照以下顺序：</span><span class="sxs-lookup"><span data-stu-id="53b2b-176">Because this stage involves moving workloads, follow this order:</span></span>

1. <span data-ttu-id="53b2b-177">构建网络。</span><span class="sxs-lookup"><span data-stu-id="53b2b-177">Build out the network.</span></span>
2. <span data-ttu-id="53b2b-178">合并标识系统 (Azure Active Directory)。</span><span class="sxs-lookup"><span data-stu-id="53b2b-178">Incorporate an identity system (Azure Active Directory).</span></span>
3. <span data-ttu-id="53b2b-179">在 Azure 中预配存储块。</span><span class="sxs-lookup"><span data-stu-id="53b2b-179">Provision storage pieces in Azure.</span></span>

<span data-ttu-id="53b2b-180">在迁移期间，Azure 环境是本地网络的扩展。</span><span class="sxs-lookup"><span data-stu-id="53b2b-180">During migration, the Azure environment is an extension of your on-premises network.</span></span> <span data-ttu-id="53b2b-181">你可以将逻辑网络与 [Azure 虚拟网络](/azure/virtual-network/virtual-networks-overview?WT.mc_id=retailecomm-docs-scseely)连接。</span><span class="sxs-lookup"><span data-stu-id="53b2b-181">You can connect the logical networks with [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="53b2b-182">你可以选择使用 [Azure ExpressRoute](/azure/expressroute/?WT.mc_id=retailecomm-docs-scseely) 在从未触及 Internet 的专用连接上保持网络与 Azure 之间的通信。</span><span class="sxs-lookup"><span data-stu-id="53b2b-182">You can choose to use [Azure ExpressRoute](/azure/expressroute/?WT.mc_id=retailecomm-docs-scseely) to keep communications between your network and Azure on a private connection that never touches the Internet.</span></span> <span data-ttu-id="53b2b-183">你也可以使用站点到站点 VPN，Azure VPN 网关在其中通过使用 Azure 与你的网络之间的加密通信安全发送的所有流量与本地 VPN 设备进行通信。</span><span class="sxs-lookup"><span data-stu-id="53b2b-183">You can also use a site-to-site VPN where an Azure VPN Gateway talks to your on-premises VPN device with all traffic sent securely using encrypted communication between Azure and your network.</span></span> <span data-ttu-id="53b2b-184">我们在[此处](/azure/architecture/reference-architectures/hybrid-networking/vpn?WT.mc_id=retailecomm-docs-scseely)已发布详细说明如何设置混合网络的参考体系结构。</span><span class="sxs-lookup"><span data-stu-id="53b2b-184">We have published a reference architecture detailing how to setup a hybrid network [here](/azure/architecture/reference-architectures/hybrid-networking/vpn?WT.mc_id=retailecomm-docs-scseely).</span></span>

<span data-ttu-id="53b2b-185">配置网络后，规划业务连续性。</span><span class="sxs-lookup"><span data-stu-id="53b2b-185">Once the network is configured, plan for business continuity.</span></span> <span data-ttu-id="53b2b-186">建议使用实时复制将本地数据移动到云并确保云和现有数据相同。</span><span class="sxs-lookup"><span data-stu-id="53b2b-186">A recommendation is to use real time replication to move your on-premises data to the cloud and to ensure that the cloud and the existing data are the same.</span></span> <span data-ttu-id="53b2b-187">电子商务商店永远不会关闭；通过复制可以从本地切换到 Azure，但会轻微影响你的客户。</span><span class="sxs-lookup"><span data-stu-id="53b2b-187">Ecommerce stores never close; duplication provides the ability to switch over from on-premises to Azure with minimal impact to your customers.</span></span>

<span data-ttu-id="53b2b-188">开始将数据、应用程序和相关服务器移动到 Azure 中。</span><span class="sxs-lookup"><span data-stu-id="53b2b-188">Begin moving the data, applications, and related servers into Azure.</span></span> <span data-ttu-id="53b2b-189">许多公司使用 [Azure Site Recovery](/azure/site-recovery/site-recovery-overview?WT.mc_id=retailecomm-docs-scseely) 服务迁移到 Azure。</span><span class="sxs-lookup"><span data-stu-id="53b2b-189">Many companies use the [Azure Site Recovery](/azure/site-recovery/site-recovery-overview?WT.mc_id=retailecomm-docs-scseely) service to migrate to Azure.</span></span> <span data-ttu-id="53b2b-190">该服务以业务连续性和灾难恢复 (BCDR) 为目标。</span><span class="sxs-lookup"><span data-stu-id="53b2b-190">The service targets business continuity and disaster recovery (BCDR).</span></span> <span data-ttu-id="53b2b-191">这是从本地迁移到 Azure 的理想之选。</span><span class="sxs-lookup"><span data-stu-id="53b2b-191">This is perfect for a migration from on-premises to Azure.</span></span> <span data-ttu-id="53b2b-192">你的实施团队可以在[此处](/azure/site-recovery/migrate-tutorial-on-premises-azure?WT.mc_id=retailecomm-docs-scseely)阅读如何将本地 VM 和物理服务器迁移到 Azure 的详细信息。</span><span class="sxs-lookup"><span data-stu-id="53b2b-192">Your implementation team can read the details of how to migrate on-premises VMs and physical servers to Azure [here](/azure/site-recovery/migrate-tutorial-on-premises-azure?WT.mc_id=retailecomm-docs-scseely).</span></span>

<span data-ttu-id="53b2b-193">将子系统移动到 Azure 后，通过测试来确保一切按预期工作。</span><span class="sxs-lookup"><span data-stu-id="53b2b-193">Once a subsystem has been moved to Azure, test to make sure that everything works as expected.</span></span> <span data-ttu-id="53b2b-194">关闭所有问题后，将工作负载移动到 Azure。</span><span class="sxs-lookup"><span data-stu-id="53b2b-194">Once all issues are closed, move the workloads over to Azure.</span></span>

### <a name="optimize"></a><span data-ttu-id="53b2b-195">优化</span><span class="sxs-lookup"><span data-stu-id="53b2b-195">Optimize</span></span>

<span data-ttu-id="53b2b-196">此时，你将继续监视环境并更改基础计算选项，以适应随环境不断变化的工作负载。</span><span class="sxs-lookup"><span data-stu-id="53b2b-196">At this point, you will continue to monitor the environment and change the underlying compute options to fit workloads as the environment changes.</span></span> <span data-ttu-id="53b2b-197">无论谁监视环境的运行状况，都应监视每个资源的使用情况。</span><span class="sxs-lookup"><span data-stu-id="53b2b-197">Whoever monitors the health of the environment should watch how much each resource is used.</span></span> <span data-ttu-id="53b2b-198">目标应为大多数 VM 的利用率达 75-90%。</span><span class="sxs-lookup"><span data-stu-id="53b2b-198">The goal should be to have 75-90% utilization on most of the VMs.</span></span> <span data-ttu-id="53b2b-199">在利用率极低的 VM 上，请考虑使用更多应用程序对其进行打包，或迁移到 Azure 上成本最低且保持正确性能级别的 VM。</span><span class="sxs-lookup"><span data-stu-id="53b2b-199">On VMs that have exceptionally low utilization, consider packing them with more applications, or migrating to the lowest cost VMs on Azure that retain the right level of performance.</span></span>

<span data-ttu-id="53b2b-200">Azure 也提供了用来优化环境的工具。</span><span class="sxs-lookup"><span data-stu-id="53b2b-200">Azure provides tools to optimize the environment as well.</span></span> <span data-ttu-id="53b2b-201">[Azure 顾问](/azure/advisor/advisor-overview?WT.mc_id=retailecomm-docs-scseely)可以监视你的环境的组件，并基于最佳做法提供个性化建议。</span><span class="sxs-lookup"><span data-stu-id="53b2b-201">[Azure Advisor](/azure/advisor/advisor-overview?WT.mc_id=retailecomm-docs-scseely) monitors components of your environment and provides personalized recommendations based on best practices.</span></span> <span data-ttu-id="53b2b-202">这些建议有助于改善应用程序中使用的资源的性能、安全性和可用性。</span><span class="sxs-lookup"><span data-stu-id="53b2b-202">The recommendations help improve the performance, security, and availability of the resources used in your applications.</span></span> <span data-ttu-id="53b2b-203">Azure 门户还公开了有关应用程序运行状况的信息。</span><span class="sxs-lookup"><span data-stu-id="53b2b-203">The Azure portal also exposes information about the health of your applications.</span></span> <span data-ttu-id="53b2b-204">你的 VM 应充分利用[适用于 Linux 和 Windows 的 Azure 虚拟机扩展](/azure/virtual-machines/extensions/overview?WT.mc_id=retailecomm-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="53b2b-204">Your VMs should take advantage of the [Azure virtual machine extensions for Linux and Windows](/azure/virtual-machines/extensions/overview?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="53b2b-205">这些扩展提供了后期部署配置、防病毒、应用监视等。</span><span class="sxs-lookup"><span data-stu-id="53b2b-205">Those extensions provide for post deployment configuration, antivirus, app monitoring, and more.</span></span> <span data-ttu-id="53b2b-206">你还可以充分利用许多其他 Azure 服务进行网络诊断、服务使用以及通过[网络观察程序](/azure/network-watcher/network-watcher-monitoring-overview?WT.mc_id=retailecomm-docs-scseely)、[服务映射](/azure/monitoring/monitoring-walkthrough-servicemap?WT.mc_id=retailecomm-docs-scseely)、[Application Insights](/azure/application-insights/app-insights-overview?WT.mc_id=retailecomm-docs-scseely) 和 [Log Analytics](/azure/log-analytics/log-analytics-overview?WT.mc_id=retailecomm-docs-scseely) 等服务发出警报。</span><span class="sxs-lookup"><span data-stu-id="53b2b-206">You can also take advantage of many other Azure services for network diagnostics, service usage, and alerting through services like [Network Watcher](/azure/network-watcher/network-watcher-monitoring-overview?WT.mc_id=retailecomm-docs-scseely), [Service Map](/azure/monitoring/monitoring-walkthrough-servicemap?WT.mc_id=retailecomm-docs-scseely), [Application Insights](/azure/application-insights/app-insights-overview?WT.mc_id=retailecomm-docs-scseely), and [Log Analytics](/azure/log-analytics/log-analytics-overview?WT.mc_id=retailecomm-docs-scseely).</span></span>

<span data-ttu-id="53b2b-207">虽然组织中的部分人员现在正在 Azure 中优化系统，但开发团队可以开始转到迁移后阶段：重构。</span><span class="sxs-lookup"><span data-stu-id="53b2b-207">While parts of the organization are optimizing the system now in Azure, the development teams can begin moving to the post-migration phase: refactor.</span></span>

## <a name="refactor"></a><span data-ttu-id="53b2b-208">重构</span><span class="sxs-lookup"><span data-stu-id="53b2b-208">Refactor</span></span>

<span data-ttu-id="53b2b-209">迁移完成后，你的电子商务应用程序可以开始充分利用它在 Azure 中的新本组织。</span><span class="sxs-lookup"><span data-stu-id="53b2b-209">With the migration complete, your ecommerce application can start taking advantage of its new home in Azure.</span></span> <span data-ttu-id="53b2b-210">重构阶段不必等到移动整个环境。</span><span class="sxs-lookup"><span data-stu-id="53b2b-210">The refactor phase does not have to wait until the entire environment has moved.</span></span> <span data-ttu-id="53b2b-211">如果你的 CMS 团队已迁移，但 ERP 团队没有，则不存在任何问题。</span><span class="sxs-lookup"><span data-stu-id="53b2b-211">If your CMS team has migrated, but the ERP team has not, no problem.</span></span> <span data-ttu-id="53b2b-212">CMS 团队仍可以开始重构工作。</span><span class="sxs-lookup"><span data-stu-id="53b2b-212">The CMS team can still begin their refactoring efforts.</span></span> <span data-ttu-id="53b2b-213">此阶段涉及到使用其他 Azure 服务通过重构你的应用程序来优化成本、可靠性和性能。</span><span class="sxs-lookup"><span data-stu-id="53b2b-213">This stage involves using additional Azure services to optimize the cost, reliability, and performance by refactoring your applications.</span></span> <span data-ttu-id="53b2b-214">而在“直接迁移”中，你仅利用提供程序托管的硬件和操作系统，在此模型中还可以利用云服务来降低成本。</span><span class="sxs-lookup"><span data-stu-id="53b2b-214">Where in lift and shift, you were only taking advantage of the provider managed hardware and OS, in this model you also take advantage of cloud services to drive down cost.</span></span> <span data-ttu-id="53b2b-215">继续按原样使用当前应用程序（仅做一些轻微的应用程序代码或配置更改），并将应用程序连接到新的基础结构服务（如容器、数据库和标识管理系统）。</span><span class="sxs-lookup"><span data-stu-id="53b2b-215">You continue to utilize your current application as-is, with some minor application code or configuration changes, and connect your application to new infrastructure services such as containers, database, and identity management systems.</span></span>

<span data-ttu-id="53b2b-216">重构工作几乎不会更改代码和配置。</span><span class="sxs-lookup"><span data-stu-id="53b2b-216">The refactoring effort changes very little code and configuration.</span></span> <span data-ttu-id="53b2b-217">在自动化上花费更多时间的主要原因是此阶段采用的技术依赖脚本构建和部署资源；部署说明是一个脚本。</span><span class="sxs-lookup"><span data-stu-id="53b2b-217">You will focus more time on automation mostly because the technologies adopted at this phase rely upon scripting to build up and deploy the resources; the deployment instructions are a script.</span></span>

<span data-ttu-id="53b2b-218">虽然可以使用多个 Azure 服务，但我们将侧重于重构阶段中使用的最常见服务：容器、应用服务和数据库服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-218">While many of the Azure services can be used, we will focus on the most common services used in the refactor phase: containers, app services, and database services.</span></span> <span data-ttu-id="53b2b-219">为何要介绍重构？</span><span class="sxs-lookup"><span data-stu-id="53b2b-219">Why do we look at refactoring?</span></span> <span data-ttu-id="53b2b-220">重构提供了强大的代码基础，可通过使代码债务保持在合理范围内来降低长期成本。</span><span class="sxs-lookup"><span data-stu-id="53b2b-220">Refactoring provides a strong code foundation that lowers long-term costs by keeping code debt within reason.</span></span>

<span data-ttu-id="53b2b-221">容器提供了一种绑定应用程序的方法。</span><span class="sxs-lookup"><span data-stu-id="53b2b-221">Containers provide a way to bundle applications.</span></span> <span data-ttu-id="53b2b-222">由于容器虚拟化操作系统所采用的方式，因此可以将多个容器打包到一个 VM。</span><span class="sxs-lookup"><span data-stu-id="53b2b-222">Because of the way a container virtualizes the operating system, you can pack multiple containers into a single VM.</span></span> <span data-ttu-id="53b2b-223">可以将应用程序移动到容器（无代码更改或少量代码更改）；可能需要进行配置更改。</span><span class="sxs-lookup"><span data-stu-id="53b2b-223">You can move an application to a container with zero to few code changes; you may need configuration changes.</span></span> <span data-ttu-id="53b2b-224">这项工作也会导致编写可将应用程序捆绑到容器中的脚本。</span><span class="sxs-lookup"><span data-stu-id="53b2b-224">This effort also leads to writing scripts that bundle applications into a container.</span></span> <span data-ttu-id="53b2b-225">开发团队将花费其重构时间来编写和测试这些脚本。</span><span class="sxs-lookup"><span data-stu-id="53b2b-225">Your development teams will spend their refactoring time writing and testing these scripts.</span></span> <span data-ttu-id="53b2b-226">Azure 支持通过 [Azure Kubernetes 服务](/azure/aks/?WT.mc_id=retailecomm-docs-scseely) (AKS) 以及可用于管理容器映像的相关 [Azure 容器注册表](https://azure.microsoft.com/services/container-registry/?WT.mc_id=retailecomm-docs-scseely)进行容器化。</span><span class="sxs-lookup"><span data-stu-id="53b2b-226">Azure supports containerization through the [Azure Kubernetes Service](/azure/aks/?WT.mc_id=retailecomm-docs-scseely) (AKS) and the related [Azure Container Registry](https://azure.microsoft.com/services/container-registry/?WT.mc_id=retailecomm-docs-scseely) which you can use to manage the container images.</span></span>

<span data-ttu-id="53b2b-227">对于应用服务，可以充分利用各种 Azure 服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-227">For app services, you can take advantage of various Azure services.</span></span> <span data-ttu-id="53b2b-228">例如，现有基础结构可能会通过将消息放入队列（如 [RabbitMQ](https://www.rabbitmq.com/)）来处理客户订单。</span><span class="sxs-lookup"><span data-stu-id="53b2b-228">For example, your existing infrastructure may handle a customer order by placing messages into a queue like [RabbitMQ](https://www.rabbitmq.com/).</span></span> <span data-ttu-id="53b2b-229">（例如，一条消息是对客户进行收费，第二条消息是配送订单。）重新托管时，将 RabbitMQ 放在单独的 VM 中。</span><span class="sxs-lookup"><span data-stu-id="53b2b-229">(For example, one message is to charge the customer, a second is to ship the order.) When rehosting, you put RabbitMQ in a separate VM.</span></span> <span data-ttu-id="53b2b-230">在重构期间，将[服务总线](/azure/service-bus-messaging/service-bus-queues-topics-subscriptions?WT.mc_id=retailecomm-docs-scseely)队列或主题添加到解决方案中，重写 RabbitMQ 代码，并停止使用提供队列功能的 VM。</span><span class="sxs-lookup"><span data-stu-id="53b2b-230">During refactoring, you add a [Service Bus](/azure/service-bus-messaging/service-bus-queues-topics-subscriptions?WT.mc_id=retailecomm-docs-scseely) queue or topic to the solution, rewrite your RabbitMQ code, and stop using the VMs that served the queuing functionality.</span></span> <span data-ttu-id="53b2b-231">此更改会将一组 VM 替换为始终可用的消息队列服务以降低成本。</span><span class="sxs-lookup"><span data-stu-id="53b2b-231">This change replaces a set of VMs with an always-on message queue service for a lower cost.</span></span> <span data-ttu-id="53b2b-232">可在 Azure 门户中找到其他应用服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-232">Other app services can be found in the Azure Portal.</span></span>

<span data-ttu-id="53b2b-233">对于数据库，可以将你的数据库从 VM 移动到服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-233">For databases, you can move your database from a VM to a service.</span></span> <span data-ttu-id="53b2b-234">Azure 支持使用 [Azure SQL 数据库](/azure/sql-database/sql-database-cloud-migrate?WT.mc_id=retailecomm-docs-scseely)和 [Azure SQL 数据库托管实例](/azure/sql-database/sql-database-managed-instance?WT.mc_id=retailecomm-docs-scseely)的 SQL Server 工作负载。</span><span class="sxs-lookup"><span data-stu-id="53b2b-234">Azure supports SQL Server workloads with [Azure SQL Database](/azure/sql-database/sql-database-cloud-migrate?WT.mc_id=retailecomm-docs-scseely) and [Azure SQL Database Managed Instance](/azure/sql-database/sql-database-managed-instance?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="53b2b-235">[数据迁移服务](https://azure.microsoft.com/services/database-migration/?WT.mc_id=retailecomm-docs-scseely)会评估你的数据库，告知你需要在迁移之前执行的工作，并将数据库从 VM 移动到服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-235">The [Data Migration Service](https://azure.microsoft.com/services/database-migration/?WT.mc_id=retailecomm-docs-scseely) assesses your database, informs you of work that needs to happen prior to the migration, and then moves the database from your VM to the service.</span></span> <span data-ttu-id="53b2b-236">Azure 支持 [MySQL](https://azure.microsoft.com/services/mysql/?WT.mc_id=retailecomm-docs-scseely)、[PostgreSQL](https://azure.microsoft.com/services/postgresql/?WT.mc_id=retailecomm-docs-scseely) 以及[其他数据库](https://azure.microsoft.com/services/#databases?WT.mc_id=retailecomm-docs-scseely)引擎服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-236">Azure supports [MySQL](https://azure.microsoft.com/services/mysql/?WT.mc_id=retailecomm-docs-scseely), [PostgreSQL](https://azure.microsoft.com/services/postgresql/?WT.mc_id=retailecomm-docs-scseely), and [other database](https://azure.microsoft.com/services/#databases?WT.mc_id=retailecomm-docs-scseely) engine services  as well.</span></span>

## <a name="rebuild"></a><span data-ttu-id="53b2b-237">重新生成</span><span class="sxs-lookup"><span data-stu-id="53b2b-237">Rebuild</span></span>

<span data-ttu-id="53b2b-238">到目前为止，我们已尝试最大限度地减少对电子商务系统的更改 — 我们仅保留工作系统。</span><span class="sxs-lookup"><span data-stu-id="53b2b-238">Up until this point, we tried to minimize changes to the ecommerce systems—we left working systems alone.</span></span> <span data-ttu-id="53b2b-239">接下来讨论如何真正充分利用云。</span><span class="sxs-lookup"><span data-stu-id="53b2b-239">Now, let's discuss how to really take advantage of the cloud.</span></span> <span data-ttu-id="53b2b-240">此阶段是指通过积极采用 PaaS 甚至 SaaS 服务和体系结构来修改现有应用程序。</span><span class="sxs-lookup"><span data-stu-id="53b2b-240">This stage means to revise the existing application by aggressively adopting PaaS or even SaaS services and architecture.</span></span> <span data-ttu-id="53b2b-241">该过程包括添加新功能或为云重构应用程序的重大修改。</span><span class="sxs-lookup"><span data-stu-id="53b2b-241">The process encompasses major revisions to add new functionality or to rearchitect the application for the cloud.</span></span>  <span data-ttu-id="53b2b-242">托管 API 是充分利用云系统的新概念。</span><span class="sxs-lookup"><span data-stu-id="53b2b-242">_Managed APIs_ is a new concept that takes advantage of cloud systems.</span></span> <span data-ttu-id="53b2b-243">我们可以通过创建用于在服务之间通信的 API 来使系统更易于更新。</span><span class="sxs-lookup"><span data-stu-id="53b2b-243">We can make our system easier to update, by creating APIs for communication between services.</span></span>  <span data-ttu-id="53b2b-244">第二个好处是能够深入了解我们拥有的数据。</span><span class="sxs-lookup"><span data-stu-id="53b2b-244">A second benefit is the ability to gain insights on the data we have.</span></span> <span data-ttu-id="53b2b-245">为此，需移动到微服务和 API 体系结构并使用机器学习和其他工具来分析数据。</span><span class="sxs-lookup"><span data-stu-id="53b2b-245">We do this by moving to a _microservice plus API_ architecture and use machine learning and other tools to analyze data.</span></span>

### <a name="microservices--apis"></a><span data-ttu-id="53b2b-246">微服务 + API</span><span class="sxs-lookup"><span data-stu-id="53b2b-246">Microservices + APIs</span></span>

<span data-ttu-id="53b2b-247">微服务通过面向外部的 API 进行通信。</span><span class="sxs-lookup"><span data-stu-id="53b2b-247">Microservices communicate through externally facing APIs.</span></span> <span data-ttu-id="53b2b-248">每个服务都是自包含的且应实现单个业务功能，例如：向客户推荐项目、维护购物车等。</span><span class="sxs-lookup"><span data-stu-id="53b2b-248">Each service is self-contained and should implement a single business capability, for example: recommend items to customers, maintain shopping carts, and so on.</span></span> <span data-ttu-id="53b2b-249">将应用程序分解为微服务需要时间和规划。</span><span class="sxs-lookup"><span data-stu-id="53b2b-249">Decomposing an application into microservices requires time and planning.</span></span> <span data-ttu-id="53b2b-250">虽然没有硬性规则来定义微服务，但总体理念为将可部署单元减少到一组几乎总是一起更改的组件。</span><span class="sxs-lookup"><span data-stu-id="53b2b-250">While no hard rules exist to define a microservice, the general idea involves reducing the deployable unit to a set of components which almost always change together.</span></span> <span data-ttu-id="53b2b-251">通过微服务可以根据需要经常部署更改，同时减轻整个应用程序的测试负担。</span><span class="sxs-lookup"><span data-stu-id="53b2b-251">Microservices allow you to deploy changes as frequently as needed while reducing the testing burden for the overall application.</span></span> <span data-ttu-id="53b2b-252">某些服务可能极小。</span><span class="sxs-lookup"><span data-stu-id="53b2b-252">Some services might be extremely small.</span></span> <span data-ttu-id="53b2b-253">因此，在不使用任何非使用中的资源时，使用 [Azure Functions](/azure/azure-functions/functions-overview?WT.mc_id=retailecomm-docs-scseely) 变为无服务器有助于根据需要扩展为多个调用方。</span><span class="sxs-lookup"><span data-stu-id="53b2b-253">For those, going serverless with [Azure Functions](/azure/azure-functions/functions-overview?WT.mc_id=retailecomm-docs-scseely) works well to scale out to as many callers as needed while consuming no resources when not in use.</span></span> <span data-ttu-id="53b2b-254">其他服务将按业务功能划分：管理产品、捕获客户订单等。</span><span class="sxs-lookup"><span data-stu-id="53b2b-254">Other services will be broken out around business capabilities: manage product, capture customer orders, and so on.</span></span>

<span data-ttu-id="53b2b-255">无服务器机制确实存在缺点：在负载较轻时，它们的响应速度可能很慢，因为云中的某些服务器需要几秒钟时间才能配置和运行你的代码。</span><span class="sxs-lookup"><span data-stu-id="53b2b-255">Serverless mechanisms do have drawbacks: when under light load, they can be slow to respond as some server in the cloud takes a few seconds to configure and run your code.</span></span> <span data-ttu-id="53b2b-256">对于客户频繁使用的环境的一部分，你希望确保它们可以快速轻松地查找产品、下订单、请求退款等。</span><span class="sxs-lookup"><span data-stu-id="53b2b-256">For parts of your environment used heavily by customers, you want to make sure that they can find products, place orders, request returns, and so on with speed and ease.</span></span> <span data-ttu-id="53b2b-257">每当性能速度变慢时，就会有丢失购物漏斗图中的客户的风险。</span><span class="sxs-lookup"><span data-stu-id="53b2b-257">Any time that performance slows down, you risk losing customers in the shopping funnel.</span></span> <span data-ttu-id="53b2b-258">如果你有必须快速响应的功能，则在 [Azure Kubernetes 服务](/azure/aks/?WT.mc_id=retailecomm-docs-scseely)中将该功能重新生成为单独可部署的单元。</span><span class="sxs-lookup"><span data-stu-id="53b2b-258">If you have functionality that must respond quickly, rebuild that functionality as individually deployable units in [Azure Kubernetes Service](/azure/aks/?WT.mc_id=retailecomm-docs-scseely).</span></span>  <span data-ttu-id="53b2b-259">对于其他情况（例如，需要大量内存、多个 CPU 和大量本地存储的某些组合的服务），在其自己的 VM 中托管微服务可能有利。</span><span class="sxs-lookup"><span data-stu-id="53b2b-259">For other cases, such as services which require some combination of lots of memory, several CPUs, and plenty of local storage, it may make sense to host the microservice in its own VM.</span></span>

<span data-ttu-id="53b2b-260">每个服务都使用 API 进行交互。</span><span class="sxs-lookup"><span data-stu-id="53b2b-260">Each service uses an API for interaction.</span></span> <span data-ttu-id="53b2b-261">对 API 的访问权限可以直接访问微服务，但这需要与该服务通信的任何人了解应用程序拓扑。</span><span class="sxs-lookup"><span data-stu-id="53b2b-261">Access to the API can be direct to the microservice, but this requires anyone communicating with the service to know the application topology.</span></span> <span data-ttu-id="53b2b-262">[API 管理](/azure/api-management/?WT.mc_id=retailecomm-docs-scseely)等服务为你提供了一种发布 API 的重要方法。</span><span class="sxs-lookup"><span data-stu-id="53b2b-262">A service like [API Management](/azure/api-management/?WT.mc_id=retailecomm-docs-scseely) gives you a central way to publish APIs.</span></span> <span data-ttu-id="53b2b-263">所有应用程序只需连接到 API 管理服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-263">All applications simply connect to the API Management service.</span></span> <span data-ttu-id="53b2b-264">开发人员可以发现哪些 API 是可用的。</span><span class="sxs-lookup"><span data-stu-id="53b2b-264">Developers can discover what APIs are available.</span></span> <span data-ttu-id="53b2b-265">API 管理服务还能够使零售环境表现良好。</span><span class="sxs-lookup"><span data-stu-id="53b2b-265">The API Management service also provides capabilities to make your retail environment perform well.</span></span> <span data-ttu-id="53b2b-266">该服务可以按应用程序的不同部分限制对 API 的访问（以防止遇到瓶颈），缓存慢更改值的响应，从 JSON 转换为 XML 等。</span><span class="sxs-lookup"><span data-stu-id="53b2b-266">The service can limit access to the API by different parts of the application (to prevent bottlenecks), cache responses to slow changing values, convert from JSON to XML, and more.</span></span> <span data-ttu-id="53b2b-267">可以在[此处](/azure/api-management/api-management-policies?WT.mc_id=retailecomm-docs-scseely)找到策略的完整列表。</span><span class="sxs-lookup"><span data-stu-id="53b2b-267">A complete list of policies can be found [here](/azure/api-management/api-management-policies?WT.mc_id=retailecomm-docs-scseely).</span></span>

### <a name="make-use-of-your-data-and-the-azure-marketplace"></a><span data-ttu-id="53b2b-268">使用你的数据和 Azure 市场</span><span class="sxs-lookup"><span data-stu-id="53b2b-268">Make use of your data and the Azure Marketplace</span></span>

<span data-ttu-id="53b2b-269">由于 Azure 中存在所有数据和系统，因此可以轻松地将其他 SaaS 解决方案合并到你的业务中。</span><span class="sxs-lookup"><span data-stu-id="53b2b-269">Because you have all your data and systems in Azure, you can easily incorporate other SaaS solutions into your business.</span></span> <span data-ttu-id="53b2b-270">可以立即执行某些操作。</span><span class="sxs-lookup"><span data-stu-id="53b2b-270">You can do some things immediately.</span></span> <span data-ttu-id="53b2b-271">例如，使用 [Power BI](https://powerbi.microsoft.com/?WT.mc_id=retailecomm-docs-scseely) 将各种数据源整合到一起以创建可视化效果和报告，并获取见解。</span><span class="sxs-lookup"><span data-stu-id="53b2b-271">For example, use [Power BI](https://powerbi.microsoft.com/?WT.mc_id=retailecomm-docs-scseely) to stitch together various data sources to create visualizations and reports—and gain insights.</span></span>

<span data-ttu-id="53b2b-272">接下来看看 [Azure 市场](https://azuremarketplace.microsoft.com/marketplace/?WT.mc_id=retailecomm-docs-scseely)中的产品/服务，这些产品/服务可以帮助你执行诸如优化清单、基于客户属性管理市场活动以及基于首选项和历史记录向每个客户提供正确的项目等操作。</span><span class="sxs-lookup"><span data-stu-id="53b2b-272">Next, take a look at the offerings in the [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/?WT.mc_id=retailecomm-docs-scseely) which can help you do things like optimize inventory, manage campaigns based on customer attributes, and present the right items to each customer based on their preferences and history.</span></span> <span data-ttu-id="53b2b-273">希望花些时间来配置你的数据以便在 Marketplace 产品/服务中工作。</span><span class="sxs-lookup"><span data-stu-id="53b2b-273">Expect to spend some time configuring your data to work in the Marketplace offerings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="53b2b-274">后续步骤</span><span class="sxs-lookup"><span data-stu-id="53b2b-274">Next Steps</span></span>

<span data-ttu-id="53b2b-275">许多开发团队试图同时执行重新托管和重构操作来解决技术债务并更好地利用容量。</span><span class="sxs-lookup"><span data-stu-id="53b2b-275">Many development teams are tempted to do rehost and refactor simultaneously to address technical debt and better leverage capacity.</span></span> <span data-ttu-id="53b2b-276">在跳转到后续步骤之前进行重新托管有好处。</span><span class="sxs-lookup"><span data-stu-id="53b2b-276">There are benefits to rehosting before jumping into the next steps.</span></span>  <span data-ttu-id="53b2b-277">部署到新环境的任何问题都会更易于诊断和修复。</span><span class="sxs-lookup"><span data-stu-id="53b2b-277">Any issues in the deployment to the new environment will be easier to diagnose and fix.</span></span> <span data-ttu-id="53b2b-278">这反过来会为开发和支持团队提供时间来熟悉作为新环境的 Azure。</span><span class="sxs-lookup"><span data-stu-id="53b2b-278">This in turn gives your development and support teams time to ramp up with Azure as the new environment.</span></span> <span data-ttu-id="53b2b-279">开始重构和重新生成系统时，你是在稳定且正常运行的应用程序上进行构建。</span><span class="sxs-lookup"><span data-stu-id="53b2b-279">As you begin to refactor and rebuild the system, you are building on a stable, working application.</span></span> <span data-ttu-id="53b2b-280">这样可以进行更小且有针对性的更改并进行更频繁的更新。</span><span class="sxs-lookup"><span data-stu-id="53b2b-280">This allows for smaller, targeted changes and more frequent updates.</span></span>

<span data-ttu-id="53b2b-281">我们已发布有关迁移到云的更常规白皮书：[云迁移概要](https://azure.microsoft.com/resources/cloud-migration-essentials-e-book/?_lrsc=9618a836-9f81-4087-901f-51058783c3a8&WT.mc_id=retailecomm-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="53b2b-281">We have published a more general whitepaper on migrating to the cloud: [Cloud Migration Essentials](https://azure.microsoft.com/resources/cloud-migration-essentials-e-book/?_lrsc=9618a836-9f81-4087-901f-51058783c3a8&WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="53b2b-282">这在规划迁移时非常适合通读。</span><span class="sxs-lookup"><span data-stu-id="53b2b-282">This is a great piece to read through as you plan out your migration.</span></span>

## <a name="technologies-presented"></a><span data-ttu-id="53b2b-283">所提供的技术</span><span class="sxs-lookup"><span data-stu-id="53b2b-283">Technologies Presented</span></span>

<span data-ttu-id="53b2b-284">重新托管期间使用：</span><span class="sxs-lookup"><span data-stu-id="53b2b-284">Used during rehost:</span></span>

- <span data-ttu-id="53b2b-285">[Azure 顾问](/azure/advisor/advisor-overview?WT.mc_id=retailecomm-docs-scseely)是个性化的云顾问程序，可帮助遵循最佳做法来优化 Azure 部署。</span><span class="sxs-lookup"><span data-stu-id="53b2b-285">[Azure Advisor](/azure/advisor/advisor-overview?WT.mc_id=retailecomm-docs-scseely) is a personalized cloud consultant that helps you follow best practices to optimize your Azure deployments.</span></span>
- <span data-ttu-id="53b2b-286">[Azure Migrate](/azure/migrate/migrate-overview?WT.mc_id=retailecomm-docs-scseely) 服务会评估要迁移到 Azure 的本地工作负载。</span><span class="sxs-lookup"><span data-stu-id="53b2b-286">The [Azure Migrate](/azure/migrate/migrate-overview?WT.mc_id=retailecomm-docs-scseely) service assesses on-premises workloads for migration to Azure.</span></span>
- <span data-ttu-id="53b2b-287">[Azure Site Recovery](/azure/site-recovery/site-recovery-overview?WT.mc_id=retailecomm-docs-scseely) 可安排和管理 Azure VM 以及本地 VM 和物理服务器的灾难恢复操作。</span><span class="sxs-lookup"><span data-stu-id="53b2b-287">[Azure Site Recovery](/azure/site-recovery/site-recovery-overview?WT.mc_id=retailecomm-docs-scseely) orchestrates and manages disaster recovery for Azure VMs, and on-premises VMs and physical servers.</span></span>
- <span data-ttu-id="53b2b-288">[Azure 虚拟网络](/azure/virtual-network/virtual-networks-overview?WT.mc_id=retailecomm-docs-scseely)允许许多类型的 Azure 资源（例如 Azure 虚拟机 (VM)）以安全方式彼此通信、与 Internet 通信，以及与本地网络通信。</span><span class="sxs-lookup"><span data-stu-id="53b2b-288">[Azure Virtual Network](/azure/virtual-network/virtual-networks-overview?WT.mc_id=retailecomm-docs-scseely) enables many types of Azure resources, such as Azure Virtual Machines (VM), to securely communicate with each other, the internet, and on-premises networks.</span></span>
- <span data-ttu-id="53b2b-289">使用 [Azure ExpressRoute](/azure/expressroute/?WT.mc_id=retailecomm-docs-scseely) 可通过连接服务提供商所提供的专用连接，将本地网络扩展到 Microsoft 云。</span><span class="sxs-lookup"><span data-stu-id="53b2b-289">[Azure ExpressRoute](/azure/expressroute/?WT.mc_id=retailecomm-docs-scseely) lets you extend your on-premises networks into the Microsoft cloud over a private connection facilitated by a connectivity provider.</span></span>

<span data-ttu-id="53b2b-290">重构期间使用：</span><span class="sxs-lookup"><span data-stu-id="53b2b-290">Used during refactor:</span></span>

- <span data-ttu-id="53b2b-291">[Azure Kubernetes 服务](/azure/aks/?WT.mc_id=retailecomm-docs-scseely)管理托管的 Kubernetes 环境，使用户无需具备容器业务流程专业知识即可快速、轻松地部署和管理容器化的应用程序。</span><span class="sxs-lookup"><span data-stu-id="53b2b-291">[Azure Kubernetes Service](/azure/aks/?WT.mc_id=retailecomm-docs-scseely) manages your hosted Kubernetes environment, making it quick and easy to deploy and manage containerized applications without container orchestration expertise.</span></span>
- <span data-ttu-id="53b2b-292">[Azure SQL 数据库](/azure/sql-database/sql-database-technical-overview?WT.mc_id=retailecomm-docs-scseely)是 Microsoft Azure 中的通用关系数据库管理服务。</span><span class="sxs-lookup"><span data-stu-id="53b2b-292">[Azure SQL Database](/azure/sql-database/sql-database-technical-overview?WT.mc_id=retailecomm-docs-scseely) is a general-purpose relational database managed service in Microsoft Azure.</span></span> <span data-ttu-id="53b2b-293">它支持关系数据、JSON、空间和 XML 等结构。</span><span class="sxs-lookup"><span data-stu-id="53b2b-293">It supports structures such as relational data, JSON, spatial, and XML.</span></span> <span data-ttu-id="53b2b-294">SQL 数据库提供托管的单一 SQL 数据库、弹性池中的托管 SQL 数据库以及 SQL 托管实例。</span><span class="sxs-lookup"><span data-stu-id="53b2b-294">SQL Database offers managed single SQL databases, managed SQL databases in an elastic pool, and SQL Managed Instances.</span></span>

<span data-ttu-id="53b2b-295">重新生成期间使用：</span><span class="sxs-lookup"><span data-stu-id="53b2b-295">Used during rebuild:</span></span>

- <span data-ttu-id="53b2b-296">Azure [API 管理](/azure/api-management/?WT.mc_id=retailecomm-docs-scseely)可帮助组织将 API 发布给外部、合作伙伴和内部开发人员，以充分发挥其数据和服务的潜力。</span><span class="sxs-lookup"><span data-stu-id="53b2b-296">Azure [API Management](/azure/api-management/?WT.mc_id=retailecomm-docs-scseely) helps organizations publish APIs to external, partner, and internal developers to unlock the potential of their data and services.</span></span>
- <span data-ttu-id="53b2b-297">[Azure Functions](/azure/azure-functions/functions-overview?WT.mc_id=retailecomm-docs-scseely) 是用于在云中轻松运行小段代码或&quot;函数&quot;的一个解决方案。</span><span class="sxs-lookup"><span data-stu-id="53b2b-297">[Azure Functions](/azure/azure-functions/functions-overview?WT.mc_id=retailecomm-docs-scseely) isa solution for easily running small pieces of code, or &quot;functions,&quot; in the cloud.</span></span>
- <span data-ttu-id="53b2b-298">[Power BI](https://powerbi.microsoft.com/?WT.mc_id=retailecomm-docs-scseely) 是一套业务分析工具，用于在整个组织内提供见解。</span><span class="sxs-lookup"><span data-stu-id="53b2b-298">[Power BI](https://powerbi.microsoft.com/?WT.mc_id=retailecomm-docs-scseely) is a suite of business analytics tools that deliver insights throughout your organization.</span></span>

## <a name="conclusion"></a><span data-ttu-id="53b2b-299">结束语</span><span class="sxs-lookup"><span data-stu-id="53b2b-299">Conclusion</span></span>

<span data-ttu-id="53b2b-300">将你的电子商务系统移动到 Azure 中将采取分析、规划和定义的方法。</span><span class="sxs-lookup"><span data-stu-id="53b2b-300">Moving your ecommerce system into Azure takes analysis, planning and a defined approach.</span></span> <span data-ttu-id="53b2b-301">我们探讨了重新托管、重构和重新生成的三阶段方法。</span><span class="sxs-lookup"><span data-stu-id="53b2b-301">We looked at a three phase approach of rehost, refactor, and rebuild.</span></span> <span data-ttu-id="53b2b-302">这将使组织能够从一个工作状态转为另一个工作状态，同时在每个步骤中最大限度地减少更改量。</span><span class="sxs-lookup"><span data-stu-id="53b2b-302">This allows an organization to move from one working state to another while minimizing the amount of change at each step.</span></span> <span data-ttu-id="53b2b-303">零售商还可以选择重构甚至重新生成组件，正在跳过一起重新托管。</span><span class="sxs-lookup"><span data-stu-id="53b2b-303">Retailers may also choose to refactor or even rebuild components, skipping rehosting altogether.</span></span> <span data-ttu-id="53b2b-304">很多时候，你将具有实现现代化的明确路径 — 在你可以时采用它。</span><span class="sxs-lookup"><span data-stu-id="53b2b-304">Many times, you will have a clear path forward to modernization—take it when you can.</span></span> <span data-ttu-id="53b2b-305">获取在 Azure 中运行的经验时，你将看到更多的机会来添加新功能、降低成本以及改善整个系统。</span><span class="sxs-lookup"><span data-stu-id="53b2b-305">As you gain experience running in Azure, you will see more opportunities to add new capabilities, reduce costs, and improve the overall system.</span></span>


<span data-ttu-id="53b2b-306">_本文作者是 Scott Seely 和 Mariya Zorotovich。_</span><span class="sxs-lookup"><span data-stu-id="53b2b-306">_This article was authored by Scott Seely and Mariya Zorotovich._</span></span>