---
title: 将精算风险分析迁移到 Azure 的指南
author: scseely
ms.author: scseely
ms.date: 11/20/2019
ms.topic: article
ms.service: industry
description: 精算开发人员如何将现有解决方案和支持基础设施迁移到 Azure。
ms.openlocfilehash: 456c054cf3a6165f160005ba8ea2c155637faa07
ms.sourcegitcommit: 3b175d73a82160c4cacec1ce00c6d804a93c765d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/06/2020
ms.locfileid: "77052665"
---
# <a name="actuarial-risk-analysis-and-financial-modeling-solution-guide"></a><span data-ttu-id="10a86-103">精算风险分析和金融建模解决方案指南</span><span class="sxs-lookup"><span data-stu-id="10a86-103">Actuarial risk analysis and financial modeling solution guide</span></span>

<span data-ttu-id="10a86-104">在过去几年中，保险公司和提供保险类产品的公司看到一些新法规的出台。</span><span class="sxs-lookup"><span data-stu-id="10a86-104">Over the last several years, insurers and companies that provide insurance-like products have seen several new regulations come into place.</span></span> <span data-ttu-id="10a86-105">这些新法规要求保险公司进行更广泛的金融建模。</span><span class="sxs-lookup"><span data-stu-id="10a86-105">These new regulations have required more extensive financial modeling for insurers.</span></span> <span data-ttu-id="10a86-106">欧盟颁布了[偿付能力 II](https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=celex%3A32009L0138)，要求保险公司证明他们已经进行了适当的分析，以证实保险公司在年底将具备偿付能力。</span><span class="sxs-lookup"><span data-stu-id="10a86-106">The European Union enacted [Solvency II](https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=celex%3A32009L0138) which requires insurers to demonstrate that they have done proper analysis to validate that the insurer will be solvent at the end of the year.</span></span> <span data-ttu-id="10a86-107">提供可变年金的保险公司必须遵循[精算准则 XLIII](https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=celex%3A32009L0138)，并对资产和负债现金流进行广泛分析。</span><span class="sxs-lookup"><span data-stu-id="10a86-107">Insurers who provide variable annuities have to follow [Actuarial Guideline XLIII](https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=celex%3A32009L0138) with extensive analysis of asset and liability cash flows.</span></span> <span data-ttu-id="10a86-108">所有类型的保险公司，包括分销保险类产品的保险公司，都必须在 2021 年之前实施[国际财务报告准则第 17 号](https://www.ifrs.org/supporting-implementation/supporting-materials-by-ifrs-standard/ifrs-17/) (IFRS 17)。</span><span class="sxs-lookup"><span data-stu-id="10a86-108">All types of insurers, including those who distribute insurance like products, will have to implement [International Financial Reporting Standard 17](https://www.ifrs.org/supporting-implementation/supporting-materials-by-ifrs-standard/ifrs-17/) (IFRS 17) by 2021.</span></span> <span data-ttu-id="10a86-109">根据保险公司运营所在的司法管辖区不同，会存在其他法规。</span><span class="sxs-lookup"><span data-stu-id="10a86-109">Other regulations exist depending on the jurisdictions the insurers operate in.</span></span> <span data-ttu-id="10a86-110">这些标准和法规要求精算师在对资产和负债进行建模时使用计算密集型技术。</span><span class="sxs-lookup"><span data-stu-id="10a86-110">These standards and regulations require actuaries to use compute-intensive techniques when modeling assets and liabilities.</span></span> <span data-ttu-id="10a86-111">许多分析将利用随机生成的方案数据，而不是资产和负债等内容的连续输入。</span><span class="sxs-lookup"><span data-stu-id="10a86-111">Much of the analysis will make use of stochastically generated scenario data over seriatim inputs of things like assets and liabilities.</span></span> <span data-ttu-id="10a86-112">除了监管需求外，精算师还会进行相当多的财务建模和计算，以针对生成监管报告的模型生成输入表。</span><span class="sxs-lookup"><span data-stu-id="10a86-112">Beyond regulatory needs, actuaries do a fair amount of financial modeling and computation to generate the input tables for the models that generate the regulatory reports.</span></span> <span data-ttu-id="10a86-113">内部网格不能满足计算需求，因此精算师正在稳步迁移到云。</span><span class="sxs-lookup"><span data-stu-id="10a86-113">Internal grids do not satisfy the computational needs, so actuaries are steadily moving to the cloud.</span></span>

<span data-ttu-id="10a86-114">精算师迁移到云，以便有更多时间来审查、评估和验证结果。</span><span class="sxs-lookup"><span data-stu-id="10a86-114">Actuaries move to the cloud to get more time to review, evaluate, and validate results.</span></span> <span data-ttu-id="10a86-115">当监管机构对保险公司进行审计时，精算师需要能够解释其结果。</span><span class="sxs-lookup"><span data-stu-id="10a86-115">When regulators audit insurers, the actuaries need to be able to explain their results.</span></span> <span data-ttu-id="10a86-116">迁移到云可以访问计算资源，通过强大的并行化能力，在 24-120 小时的时钟时间内运行 20000 小时的分析。</span><span class="sxs-lookup"><span data-stu-id="10a86-116">The move to the cloud gives access to the computing resources to run 20000 hours of analysis in 24-120 hours of clock time through the power of parallelization.</span></span> <span data-ttu-id="10a86-117">为了满足这种规模需求，许多创建精算软件的公司提供了允许在 Azure 中运行计算的解决方案。</span><span class="sxs-lookup"><span data-stu-id="10a86-117">To assist with this need for scale, many of the companies that create actuarial software provide solutions that allow calculations to run in Azure.</span></span> <span data-ttu-id="10a86-118">其中一些解决方案基于本地运行的技术和 Azure（如 [HPC Pack](https://docs.microsoft.com/powershell/high-performance-computing/overview?view=hpc16-ps&WT.mc_id=riskmodel-docs-scseely)）构建。</span><span class="sxs-lookup"><span data-stu-id="10a86-118">Some of these solutions are built on technologies that run on premises and Azure like [HPC Pack](https://docs.microsoft.com/powershell/high-performance-computing/overview?view=hpc16-ps&WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="10a86-119">其他是 Azure 本机的，使用 [Azure Batch](https://docs.microsoft.com/azure/batch?WT.mc_id=riskmodel-docs-scseely)、[虚拟机规模集](https://docs.microsoft.com/azure/virtual-machine-scale-sets?WT.mc_id=riskmodel-docs-scseely)，或自定义缩放解决方案。</span><span class="sxs-lookup"><span data-stu-id="10a86-119">Others are Azure native and use [Azure Batch](https://docs.microsoft.com/azure/batch?WT.mc_id=riskmodel-docs-scseely), [Virtual Machine Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets?WT.mc_id=riskmodel-docs-scseely), or a custom scaling solution.</span></span>

<span data-ttu-id="10a86-120">在本文中，我们将介绍精算开发人员如何使用 Azure 并搭配建模包来分析风险。</span><span class="sxs-lookup"><span data-stu-id="10a86-120">In this article, we will look at how actuarial developers can use Azure, coupled with modeling packages, to analyze risk.</span></span> <span data-ttu-id="10a86-121">本文介绍建模包用于在 Azure 上大规模运行的一些 Azure 技术。</span><span class="sxs-lookup"><span data-stu-id="10a86-121">The article explains some of the Azure technologies the modeling packages use to run at scale on Azure.</span></span> <span data-ttu-id="10a86-122">可以使用相同的技术对数据进行进一步分析。</span><span class="sxs-lookup"><span data-stu-id="10a86-122">You can use the same technology to do further analysis of your data.</span></span> <span data-ttu-id="10a86-123">我们来看看以下各项：</span><span class="sxs-lookup"><span data-stu-id="10a86-123">We look at the following items:</span></span>

- <span data-ttu-id="10a86-124">在 Azure 中以更短的时间运行更大的模型。</span><span class="sxs-lookup"><span data-stu-id="10a86-124">Running larger models in less time, in Azure.</span></span>
- <span data-ttu-id="10a86-125">报告结果。</span><span class="sxs-lookup"><span data-stu-id="10a86-125">Reporting on the results.</span></span>
- <span data-ttu-id="10a86-126">管理数据保留。</span><span class="sxs-lookup"><span data-stu-id="10a86-126">Managing data retention.</span></span>

<span data-ttu-id="10a86-127">无论是为寿险、财产和意外、健康还是其他保险提供服务，都需要创建资产和负债的财务和风险模型，以调整投资和保费，从而作为保险公司能保持偿付能力。</span><span class="sxs-lookup"><span data-stu-id="10a86-127">Whether you are servicing life, property and casualty, health, or other insurance, you need to create financial and risk models of your assets and liabilities to adjust your investments and premiums so that you stay solvent as an insurer.</span></span> <span data-ttu-id="10a86-128">IFRS 17 报告为精算师创建的模型增加了变化，例如计算合同服务边际 (CSM)，从而改变了保险公司随时间管理其利润的方式。</span><span class="sxs-lookup"><span data-stu-id="10a86-128">IFRS 17 reporting adds changes to the models the actuaries create, like calculating the contractual service margin (CSM), which change how insurers manage their profit through time.</span></span>

## <a name="running-more-in-less-time-in-azure"></a><span data-ttu-id="10a86-129">在 Azure 中以更短的时间运行更多内容</span><span class="sxs-lookup"><span data-stu-id="10a86-129">Running more in less time, in Azure</span></span>

<span data-ttu-id="10a86-130">相信云的承诺：它可以更快、更轻松地运行财务和风险模型。</span><span class="sxs-lookup"><span data-stu-id="10a86-130">You believe in the promise of the cloud: it can run your financial and risk models faster and easier.</span></span> <span data-ttu-id="10a86-131">对于许多保险公司而言，封底计算有一个问题：他们需要数年甚至数十年的连续时间来从头到尾运行这些计算。</span><span class="sxs-lookup"><span data-stu-id="10a86-131">For many insurers, a back of the envelope calculation shows the problem: they need years, or even decades, of sequential time to run these calculations from start to finish.</span></span> <span data-ttu-id="10a86-132">需要技术来解决运行时问题。</span><span class="sxs-lookup"><span data-stu-id="10a86-132">You need technology to solve the runtime problem.</span></span> <span data-ttu-id="10a86-133">策略包括：</span><span class="sxs-lookup"><span data-stu-id="10a86-133">Your strategies are:</span></span>

- <span data-ttu-id="10a86-134">数据准备：某些数据变化缓慢。</span><span class="sxs-lookup"><span data-stu-id="10a86-134">Data preparation: Some data changes slowly.</span></span> <span data-ttu-id="10a86-135">一旦政策或服务协定生效，声明就会以可预测的速度迁移。</span><span class="sxs-lookup"><span data-stu-id="10a86-135">Once a policy or service contract is in force, claims move at a predictable pace.</span></span> <span data-ttu-id="10a86-136">可以准备在模型到达时运行所需的数据，从而无需为数据清理和准备规划大量时间。</span><span class="sxs-lookup"><span data-stu-id="10a86-136">You can prepare the data needed for model runs as it arrives, eliminating a need to plan much time for data cleansing and preparation.</span></span> <span data-ttu-id="10a86-137">还可以使用群集通过加权的表示形式为连续数据创建备用项。</span><span class="sxs-lookup"><span data-stu-id="10a86-137">You may also use clustering to create stand-ins for seriatim data through weighted representations.</span></span> <span data-ttu-id="10a86-138">较少的记录通常会使计算时间缩短。</span><span class="sxs-lookup"><span data-stu-id="10a86-138">Fewer records usually results in reduced computation time.</span></span>
- <span data-ttu-id="10a86-139">并行化：如果需要对两个或多个项进行相同的分析，可以同时执行分析。</span><span class="sxs-lookup"><span data-stu-id="10a86-139">Parallelization: If you need to do the same analysis to two or more items, you may be able to perform the analysis simultaneously.</span></span>

<span data-ttu-id="10a86-140">让我们分别来看看这些项。</span><span class="sxs-lookup"><span data-stu-id="10a86-140">Let's look at these items individually.</span></span>

### <a name="data-preparation"></a><span data-ttu-id="10a86-141">数据准备</span><span class="sxs-lookup"><span data-stu-id="10a86-141">Data Preparation</span></span>

<span data-ttu-id="10a86-142">数据从多个不同的来源流入。</span><span class="sxs-lookup"><span data-stu-id="10a86-142">Data flows in from several different sources.</span></span> <span data-ttu-id="10a86-143">你的业务簿中包含半结构化的政策数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-143">You have semi-structured policy data in your books of business.</span></span> <span data-ttu-id="10a86-144">有关被保险人、公司和各种申请表中的条目的信息。</span><span class="sxs-lookup"><span data-stu-id="10a86-144">Information about the insured people, companies, and the items which appear in various application forms.</span></span> <span data-ttu-id="10a86-145">经济方案生成器 (ESG) 生成各种格式的数据，这些格式可能需要转换为模型可以使用的形式。</span><span class="sxs-lookup"><span data-stu-id="10a86-145">Economic Scenario Generators (ESGs) produce data in a variety of formats which may need translation to a form your model can use.</span></span> <span data-ttu-id="10a86-146">有关资产值的当前数据也需要规范化。</span><span class="sxs-lookup"><span data-stu-id="10a86-146">Current data on values of assets also needs normalization.</span></span> <span data-ttu-id="10a86-147">股票市场数据、租金现金流数据、抵押贷款支付信息以及其他资产数据在从源头转移到模型时都需要做一些准备。</span><span class="sxs-lookup"><span data-stu-id="10a86-147">The stock market data, cash flow data on rentals, payment information on mortgages, and other asset data all need some preparation when moving from the source to the model.</span></span> <span data-ttu-id="10a86-148">最后，应该根据最近的经验数据更新任何假设。</span><span class="sxs-lookup"><span data-stu-id="10a86-148">Finally, you should update any assumptions based on recent experience data.</span></span> <span data-ttu-id="10a86-149">要加快模型运行，请提前准备数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-149">To speed up a model run, you prepare the data ahead of time.</span></span> <span data-ttu-id="10a86-150">当运行时发生时，需要执行任何必要的更新以添加自上次计划内更新以来的更改。</span><span class="sxs-lookup"><span data-stu-id="10a86-150">When run time happens, you do any necessary updates to add in changes since the last scheduled update.j</span></span>

<span data-ttu-id="10a86-151">那么，如何准备数据？</span><span class="sxs-lookup"><span data-stu-id="10a86-151">So, how do you prepare the data?</span></span> <span data-ttu-id="10a86-152">让我们首先看看公共位，然后看看如何使用数据显示的不同方式。</span><span class="sxs-lookup"><span data-stu-id="10a86-152">Let's first look at the common bits and then look at how to work with the different ways data will appear.</span></span> <span data-ttu-id="10a86-153">首先，需要一种机制来获取自上次同步以来的所有更改。</span><span class="sxs-lookup"><span data-stu-id="10a86-153">First, you want a mechanism to get all the changes since the last synchronization.</span></span> <span data-ttu-id="10a86-154">该机制应包括一个可排序的值。</span><span class="sxs-lookup"><span data-stu-id="10a86-154">That mechanism should include a value which is sortable.</span></span> <span data-ttu-id="10a86-155">对于最近的更改，该值应大于以前的任何更改。</span><span class="sxs-lookup"><span data-stu-id="10a86-155">For recent changes, that value should be greater than any previous change.</span></span> <span data-ttu-id="10a86-156">最常见的两种机制是不断增加的 ID 字段或时间戳。</span><span class="sxs-lookup"><span data-stu-id="10a86-156">The two most common two mechanisms are an ever-increasing ID field or a timestamp.</span></span> <span data-ttu-id="10a86-157">如果记录具有不断增加的 ID 键，但记录的其余部分包含可更新的字段，则需要使用类似&quot;上次修改的&quot;时间戳的内容来查找更改。</span><span class="sxs-lookup"><span data-stu-id="10a86-157">If a record has an increasing ID key but the rest of the record contains fields which can be updated, you need to use something like a &quot;last-modified&quot; timestamp to find changes.</span></span> <span data-ttu-id="10a86-158">记录处理完毕后，记下最后更新项的可排序值。</span><span class="sxs-lookup"><span data-stu-id="10a86-158">Once the records have been processed, record the sortable value of the last item updated.</span></span> <span data-ttu-id="10a86-159">此值（可能是名为 _lastModified_ 的字段上的时间戳）将成为水印，用于数据存储上的后续查询。</span><span class="sxs-lookup"><span data-stu-id="10a86-159">This value, probably a timestamp on a field called _lastModified_, becomes your watermark, used for subsequent queries on the data store.</span></span> <span data-ttu-id="10a86-160">可以通过多种方式处理数据更改。</span><span class="sxs-lookup"><span data-stu-id="10a86-160">Data changes can be processed in many ways.</span></span> <span data-ttu-id="10a86-161">以下是使用资源最少的两种常见机制：</span><span class="sxs-lookup"><span data-stu-id="10a86-161">Here are two common mechanisms which use minimal resources:</span></span>

1. <span data-ttu-id="10a86-162">如果要处理数百或数千个更改：将数据上载到 blob 存储。</span><span class="sxs-lookup"><span data-stu-id="10a86-162">If you have hundreds or thousands of changes to process: Upload the data to blob storage.</span></span> <span data-ttu-id="10a86-163">使用 [Azure 数据工厂](https://docs.microsoft.com/azure/data-factory?WT.mc_id=riskmodel-docs-scseely)中的一个事件触发器来处理变更集。</span><span class="sxs-lookup"><span data-stu-id="10a86-163">Use an event trigger in [Azure Data Factory](https://docs.microsoft.com/azure/data-factory?WT.mc_id=riskmodel-docs-scseely) to process the changeset.</span></span>
2. <span data-ttu-id="10a86-164">如果要处理少量更改，或希望在更改发生后立即更新数据，请将每个更改放入由[服务总线](https://docs.microsoft.com/azure/service-bus-messaging?WT.mc_id=riskmodel-docs-scseely)或[存储队列](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction?WT.mc_id=riskmodel-docs-scseely)承载的队列消息中。</span><span class="sxs-lookup"><span data-stu-id="10a86-164">If you have small sets of changes to process or want to update your data as soon as a change happens, put each change into a queue message hosted by [Service Bus](https://docs.microsoft.com/azure/service-bus-messaging?WT.mc_id=riskmodel-docs-scseely) or [Storage Queues](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="10a86-165">[本文](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted?WT.mc_id=riskmodel-docs-scseely)对这两种队列技术之间的权衡进行了很好的解释。</span><span class="sxs-lookup"><span data-stu-id="10a86-165">[This article](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted?WT.mc_id=riskmodel-docs-scseely) has a great explanation about the tradeoffs between the two queueing technologies.</span></span> <span data-ttu-id="10a86-166">一旦消息进入队列后，可以使用 Azure Functions 或 Azure 数据工厂中的触发器来处理消息。</span><span class="sxs-lookup"><span data-stu-id="10a86-166">Once a message is in a queue, you can use a trigger in Azure Functions or Azure Data Factory to process the message.</span></span>

<span data-ttu-id="10a86-167">下图演示了一个典型方案。</span><span class="sxs-lookup"><span data-stu-id="10a86-167">The following figure illustrates a typical scenario.</span></span> <span data-ttu-id="10a86-168">首先，计划的作业收集一些数据集并将文件放入存储中。</span><span class="sxs-lookup"><span data-stu-id="10a86-168">First, a scheduled job collects some set of data and places the file into storage.</span></span> <span data-ttu-id="10a86-169">计划的作业可以是本地运行的 CRON 作业、[计划程序任务](https://docs.microsoft.com/azure/scheduler?WT.mc_id=riskmodel-docs-scseely)、[逻辑应用](https://docs.microsoft.com/azure/logic-apps/logic-apps-overview?WT.mc_id=riskmodel-docs-scseely)或在计时器上运行的任何内容。</span><span class="sxs-lookup"><span data-stu-id="10a86-169">The scheduled job can be a CRON job running on premises, a [Scheduler task](https://docs.microsoft.com/azure/scheduler?WT.mc_id=riskmodel-docs-scseely), [Logic App](https://docs.microsoft.com/azure/logic-apps/logic-apps-overview?WT.mc_id=riskmodel-docs-scseely), or anything that runs on a timer.</span></span> <span data-ttu-id="10a86-170">上载文件后，可以触发 [Azure Function](https://docs.microsoft.com/azure/azure-functions?WT.mc_id=riskmodel-docs-scseely)或**数据工厂**实例来处理数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-170">Once the file is uploaded, an [Azure Function](https://docs.microsoft.com/azure/azure-functions?WT.mc_id=riskmodel-docs-scseely) or **Data Factory** instance can be triggered to process the data.</span></span> <span data-ttu-id="10a86-171">如果可以在短时间内处理该文件，请使用 Function。</span><span class="sxs-lookup"><span data-stu-id="10a86-171">If the file can be processed in a short period of time, use a **Function**.</span></span> <span data-ttu-id="10a86-172">如果处理很复杂，需要 AI 或其他复杂的脚本，你可能会发现 [HDInsight](https://docs.microsoft.com/azure/hdinsight?WT.mc_id=riskmodel-docs-scseely)、[Azure Databricks](https://docs.microsoft.com/azure/azure-databricks?WT.mc_id=riskmodel-docs-scseely) 或自定义内容更有效。</span><span class="sxs-lookup"><span data-stu-id="10a86-172">If the processing is complex, requires AI or other complex scripting, you may find that [HDInsight](https://docs.microsoft.com/azure/hdinsight?WT.mc_id=riskmodel-docs-scseely), [Azure Databricks](https://docs.microsoft.com/azure/azure-databricks?WT.mc_id=riskmodel-docs-scseely), or something custom works better.</span></span> <span data-ttu-id="10a86-173">完成后，该文件最终以可用的形式成为新文件或数据库中的记录。</span><span class="sxs-lookup"><span data-stu-id="10a86-173">When done, the file winds up in a usable form as a new file or as records in a database.</span></span>

 ![](./assets/insurance-risk-assets/process-files.png)

<span data-ttu-id="10a86-174">数据进入 Azure 后，需要使其可供建模应用程序使用。</span><span class="sxs-lookup"><span data-stu-id="10a86-174">Once the data is in Azure, you need to make it usable by the modeling application.</span></span> <span data-ttu-id="10a86-175">可以编写代码来执行自定义转换，通过 HDInsight 或 Azure Databricks 运行项目以引入较大的项，或将数据复制到正确的数据集中。</span><span class="sxs-lookup"><span data-stu-id="10a86-175">You can write code to do custom transformations, run the items through **HDInsight** or Azure **Databricks** to ingest larger items, or copy the data into the right data sets.</span></span> <span data-ttu-id="10a86-176">使用大数据工具还可以帮助完成将非结构化数据转换为结构化数据以及在接收到的数据上运行任何 AI 和 ML 等操作。</span><span class="sxs-lookup"><span data-stu-id="10a86-176">The use of big data tools can also help you do things like transform unstructured data into structured data as well as run any AI and ML over the received data.</span></span> <span data-ttu-id="10a86-177">还可以托管虚拟机，从本地将数据直接上载到数据源，直接调用 Azure Functions 等等。</span><span class="sxs-lookup"><span data-stu-id="10a86-177">You can also host virtual machines, upload data straight to data sources from on-premises, call Azure Functions directly, and so on.</span></span>

<span data-ttu-id="10a86-178">稍后，模型需要用到这些数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-178">Later, the data needs to be consumed by your models.</span></span> <span data-ttu-id="10a86-179">执行此操作的方式在很大程度上取决于计算访问数据所需的方式。</span><span class="sxs-lookup"><span data-stu-id="10a86-179">The way you do this depends largely on how the calculations need to access data.</span></span> <span data-ttu-id="10a86-180">某些建模系统要求所有数据文件都位于运行计算的节点上。</span><span class="sxs-lookup"><span data-stu-id="10a86-180">Some modeling systems require all data files to live on the node that runs the calculation.</span></span> <span data-ttu-id="10a86-181">其他可以使用 [Azure SQL 数据库](https://docs.microsoft.com/azure/sql-database/?WT.mc_id=riskmodel-docs-scseely)、[MySQL](https://docs.microsoft.com/azure/mysql/?WT.mc_id=riskmodel-docs-scseely) 或 [PostgreSQL](https://docs.microsoft.com/azure/postgresql/?WT.mc_id=riskmodel-docs-scseely) 等数据库。</span><span class="sxs-lookup"><span data-stu-id="10a86-181">Others can make use of databases like [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/?WT.mc_id=riskmodel-docs-scseely), [MySQL](https://docs.microsoft.com/azure/mysql/?WT.mc_id=riskmodel-docs-scseely), or [PostgreSQL](https://docs.microsoft.com/azure/postgresql/?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="10a86-182">可以使用上述项目中的任何一个低成本版本，然后在建模运行期间扩展性能。</span><span class="sxs-lookup"><span data-stu-id="10a86-182">You can use a low-cost version of any of these items, and then scale up the performance during a modeling run.</span></span> <span data-ttu-id="10a86-183">这为你提供了日常工作所需的成本，以及在数千个内核请求数据时的额外速度。</span><span class="sxs-lookup"><span data-stu-id="10a86-183">This gives you the price you need for every day work, plus the extra speed just when thousands of cores are requesting data.</span></span> <span data-ttu-id="10a86-184">通常，此数据在建模运行期间将是只读的。</span><span class="sxs-lookup"><span data-stu-id="10a86-184">Normally, this data will be read-only during a modeling run.</span></span> <span data-ttu-id="10a86-185">如果计算发生在多个区域中，请考虑使用 [Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally?WT.mc_id=riskmodel-docs-scseely) 或 [Azure SQL 异地复制](https://docs.microsoft.com/azure/sql-database/sql-database-geo-replication-overview?WT.mc_id=riskmodel-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="10a86-185">If your calculations occur across multiple regions, consider using [Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally?WT.mc_id=riskmodel-docs-scseely) or [Azure SQL geo-replication](https://docs.microsoft.com/azure/sql-database/sql-database-geo-replication-overview?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="10a86-186">两者都具有以低延迟跨区域自动复制数据的机制。</span><span class="sxs-lookup"><span data-stu-id="10a86-186">Both provide mechanisms to automatically replicate data across regions with low latency.</span></span> <span data-ttu-id="10a86-187">你的选择取决于开发人员所知道的工具、对数据进行建模的方式以及用于建模运行的区域数量。</span><span class="sxs-lookup"><span data-stu-id="10a86-187">Your choice depends on the tools your developers know, how you have modeled your data, and the number of regions used for your modeling run.</span></span>

<span data-ttu-id="10a86-188">一定要花些时间考虑存储数据的位置。</span><span class="sxs-lookup"><span data-stu-id="10a86-188">Do spend some time thinking about where to store your data.</span></span> <span data-ttu-id="10a86-189">了解同时存在多少个对相同数据的请求。</span><span class="sxs-lookup"><span data-stu-id="10a86-189">Understand how many simultaneous requests for the same data will exist.</span></span> <span data-ttu-id="10a86-190">考虑将如何分发信息：</span><span class="sxs-lookup"><span data-stu-id="10a86-190">Think about how you will distribute the information:</span></span>

- <span data-ttu-id="10a86-191">每个计算节点是否都有自己的副本？</span><span class="sxs-lookup"><span data-stu-id="10a86-191">Does each computational node get its own copy?</span></span>
- <span data-ttu-id="10a86-192">副本是否通过某个高带宽位置共享？</span><span class="sxs-lookup"><span data-stu-id="10a86-192">Is the copy shared through some high bandwidth location?</span></span>

<span data-ttu-id="10a86-193">如果使用 Azure SQL 将数据集中化，则可能会在大多数情况下将数据库保持在价格较低的层。</span><span class="sxs-lookup"><span data-stu-id="10a86-193">If you keep data centralized using Azure SQL, you will likely keep the database at a lower priced tier most of the time.</span></span> <span data-ttu-id="10a86-194">如果数据仅在建模运行期间使用且不经常更新，则 Azure 客户将尽可能地备份数据并在两次运行之间关闭其数据库实例。</span><span class="sxs-lookup"><span data-stu-id="10a86-194">If the data is only used during a modeling run and is not updated very often, Azure customers will go so far as to backup the data and turn off their database instances in between runs.</span></span> <span data-ttu-id="10a86-195">潜在的节约是巨大的。</span><span class="sxs-lookup"><span data-stu-id="10a86-195">The potential savings are large.</span></span> <span data-ttu-id="10a86-196">客户还可以利用 [Azure SQL 弹性池](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool?WT.mc_id=riskmodel-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="10a86-196">Customers can also make use of [Azure SQL Elastic Pools](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="10a86-197">这些旨在控制数据库成本，尤其是不知道哪些数据库将在不同时间承受大量负载时。</span><span class="sxs-lookup"><span data-stu-id="10a86-197">These are designed to control database costs, especially when you do not know which databases will be under a lot of load at different times.</span></span> <span data-ttu-id="10a86-198">弹性池允许数据库集合尽可能多地使用所需的功能，然后在需求转移到系统中的其他位置时缩减。</span><span class="sxs-lookup"><span data-stu-id="10a86-198">The elastic pools allow a collection of databases to use as much power as they need, then scale back once demand shifts elsewhere in the system.</span></span>

<span data-ttu-id="10a86-199">可能需要在建模运行期间禁用数据同步，以便稍后在该过程中的计算使用相同的数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-199">You may need to disable data synchronization during a modeling run so that calculations later in the process are using the same data.</span></span> <span data-ttu-id="10a86-200">如果使用队列，请禁用消息处理器，但允许队列接收数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-200">If you are using queuing, disable the message processors but allow the queues to receive data.</span></span>

<span data-ttu-id="10a86-201">还可以使用运行前的时间生成经济方案、更新精算假设以及通常更新其他静态数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-201">You can also use the time before the run to generate economic scenarios, update actuarial assumptions, and generally update other static data.</span></span> <span data-ttu-id="10a86-202">让我们来看看经济方案生成 (ESG)。</span><span class="sxs-lookup"><span data-stu-id="10a86-202">Let's look at economic scenario generation (ESG).</span></span> <span data-ttu-id="10a86-203">[精算师协会](https://www.soa.org/)提供了[学院利率生成器](https://www.soa.org/tables-calcs-tools/research-scenario/) (AIRG)，这是一个模拟美国</span><span class="sxs-lookup"><span data-stu-id="10a86-203">The [Society of Actuaries](https://www.soa.org/) provides the [Academy Interest Rate Generator](https://www.soa.org/tables-calcs-tools/research-scenario/) (AIRG), an ESG which models U. S.</span></span> <span data-ttu-id="10a86-204">国债收益率的 ESG。</span><span class="sxs-lookup"><span data-stu-id="10a86-204">Treasury yields.</span></span> <span data-ttu-id="10a86-205">AIRG 规定用于评估手册20 (VM-20) 计算等项。</span><span class="sxs-lookup"><span data-stu-id="10a86-205">AIRG is prescribed for use in items like Valuation Manual 20 (VM-20) calculations.</span></span> <span data-ttu-id="10a86-206">其他 ESG 可能会对股票市场、抵押贷款、商品价格等进行建模。</span><span class="sxs-lookup"><span data-stu-id="10a86-206">Other ESGs may model the stock market, mortgages, commodity prices, and so on.</span></span>

<span data-ttu-id="10a86-207">由于你的环境正在预处理数据，因此你还可以提前运行其他部分。</span><span class="sxs-lookup"><span data-stu-id="10a86-207">Because your environment ispreprocessing the data, you can also run other pieces early.</span></span> <span data-ttu-id="10a86-208">例如，可能会有一些 yv1ou 模型使用记录来表示更大的总体的内容。</span><span class="sxs-lookup"><span data-stu-id="10a86-208">For example, you may have things which yv1ou model that use records to represent larger populations.</span></span> <span data-ttu-id="10a86-209">通常通过对记录进行群集处理来执行此操作。</span><span class="sxs-lookup"><span data-stu-id="10a86-209">One usually does this by clustering records.</span></span> <span data-ttu-id="10a86-210">如果偶尔更新数据集，例如每天更新一次，则可以将记录集减少到在引入过程中将在模型中使用的记录集。</span><span class="sxs-lookup"><span data-stu-id="10a86-210">If the dataset is updated sporadically, such as once a day, one can reduce the record set to what will be used in the model as part of the ingestion process.</span></span>

<span data-ttu-id="10a86-211">让我们来看一个实例。</span><span class="sxs-lookup"><span data-stu-id="10a86-211">Let's look at a practical example.</span></span> <span data-ttu-id="10a86-212">根据 IFRS-17，需要将合同组合在一起，以使任何两个合同的开始日期之间的最大距离不到一年。</span><span class="sxs-lookup"><span data-stu-id="10a86-212">With IFRS-17, you need to group your contracts together such that the maximum distance between the start dates for any two contracts is under one year.</span></span> <span data-ttu-id="10a86-213">让我们假设你以简单的方式执行此操作，并使用合同年作为分组机制。</span><span class="sxs-lookup"><span data-stu-id="10a86-213">Let's assume that you do this the easy way and use the contract year as the grouping mechanism.</span></span> <span data-ttu-id="10a86-214">通过读取文件并将记录移动到适当的年份分组，可以在将数据加载到 Azure 时完成此分段。</span><span class="sxs-lookup"><span data-stu-id="10a86-214">This segmentation can be done while data is loaded into Azure by reading through the file and moving the records to the appropriate year groupings.</span></span>

<span data-ttu-id="10a86-215">专注于数据准备可缩短运行模型组件所需的时间。</span><span class="sxs-lookup"><span data-stu-id="10a86-215">Focusing on data preparation reduces the time necessary to run the model components.</span></span> <span data-ttu-id="10a86-216">通过尽早获取数据，可以节省运行模型的时钟时间。</span><span class="sxs-lookup"><span data-stu-id="10a86-216">By getting the data in early, you can save clock time for running your models.</span></span>

### <a name="parallelization"></a><span data-ttu-id="10a86-217">并行化</span><span class="sxs-lookup"><span data-stu-id="10a86-217">Parallelization</span></span>

<span data-ttu-id="10a86-218">适当的步骤并行化可以极大地缩短时钟执行时间。</span><span class="sxs-lookup"><span data-stu-id="10a86-218">Proper parallelization of the steps can shrink clock execution time dramatically.</span></span> <span data-ttu-id="10a86-219">通过简化实现的部分并了解如何以允许两个或多个活动同时运行的方式表达模型可实现此加速。</span><span class="sxs-lookup"><span data-stu-id="10a86-219">This speedup happens by streamlining the pieces that you implement and knowing how to express your model in a way that allows for two or more activities to run simultaneously.</span></span> <span data-ttu-id="10a86-220">技巧就是在工作请求的大小和单个节点的工作效率之间找到平衡。</span><span class="sxs-lookup"><span data-stu-id="10a86-220">The trick is to find balance between the size of the work request and the productivity of an individual node.</span></span> <span data-ttu-id="10a86-221">如果任务在设置和清理上花费的时间比在评估上花费的时间多，则表明任务太小。</span><span class="sxs-lookup"><span data-stu-id="10a86-221">If the task spends more time in setup and cleanup than it does in evaluation, you went too small.</span></span> <span data-ttu-id="10a86-222">如果任务太大，则执行时间不会缩短。</span><span class="sxs-lookup"><span data-stu-id="10a86-222">If the task is too large, execution time does not improve.</span></span> <span data-ttu-id="10a86-223">你希望活动足够小以分布在多个节点上，并对执行时间产生积极的影响。</span><span class="sxs-lookup"><span data-stu-id="10a86-223">You want the activity to be small enough to spread over multiple nodes and make a positive difference in elapsed execution time.</span></span>

<span data-ttu-id="10a86-224">若要充分利用您的系统，您需要了解模型的工作流，以及计算如何与横向扩展的功能进行交互。你的软件可能有作业、任务或类似的概念。</span><span class="sxs-lookup"><span data-stu-id="10a86-224">To get the most out of your system, you need to understand the workflow for your model and how the computations interact with the ability to scale out. Your software may have a notion of jobs, tasks, or something similar.</span></span> <span data-ttu-id="10a86-225">利用这一知识对工作进行拆分设计。</span><span class="sxs-lookup"><span data-stu-id="10a86-225">Use that knowledge to design something that can split work up.</span></span> <span data-ttu-id="10a86-226">如果模型中有一些自定义步骤，请将其设计为允许将输入拆分为较小的组进行处理。</span><span class="sxs-lookup"><span data-stu-id="10a86-226">If you have some custom steps in your model, design those to allow for inputs to be split into smaller groups for processing.</span></span> <span data-ttu-id="10a86-227">通常，这被称为分散-聚集模式。</span><span class="sxs-lookup"><span data-stu-id="10a86-227">Oftentimes, this is referred to as a scatter-gather pattern.</span></span>

- <span data-ttu-id="10a86-228">分散：沿自然线拆分输入并允许单独的任务运行。</span><span class="sxs-lookup"><span data-stu-id="10a86-228">Scatter: Split the inputs along natural lines and allow separate tasks to run.</span></span>
- <span data-ttu-id="10a86-229">聚集：任务完成后，收集其输出。</span><span class="sxs-lookup"><span data-stu-id="10a86-229">Gather: As the tasks complete, collect their outputs.</span></span>

<span data-ttu-id="10a86-230">拆分时，还要知道进程在前进之前需要在何处同步。</span><span class="sxs-lookup"><span data-stu-id="10a86-230">When splitting things, also know where the process needs to synchronize before moving forward.</span></span> <span data-ttu-id="10a86-231">有一些常见的拆分位置。</span><span class="sxs-lookup"><span data-stu-id="10a86-231">There are a few common places people split things up.</span></span> <span data-ttu-id="10a86-232">对于嵌套的随机运行，可能有一千个外部循环，其中一组拐点运行一百个方案的内部循环。</span><span class="sxs-lookup"><span data-stu-id="10a86-232">For nested stochastic runs, you may have a thousand outer loops with a set of inflection points that run inner loops of one hundred scenarios.</span></span> <span data-ttu-id="10a86-233">每个外部循环可以同时运行。</span><span class="sxs-lookup"><span data-stu-id="10a86-233">Each outer loop can run simultaneously.</span></span> <span data-ttu-id="10a86-234">在拐点处停止，然后同时运行内部循环，返回信息以调整外部循环的数据，然后再次前进。</span><span class="sxs-lookup"><span data-stu-id="10a86-234">You halt at an inflection point, then run the inner loops simultaneously, bring the information back to adjust the data for the outer loop, and go forward again.</span></span> <span data-ttu-id="10a86-235">下图演示了该工作流。</span><span class="sxs-lookup"><span data-stu-id="10a86-235">The following figure demonstrates illustrates the workflow.</span></span> <span data-ttu-id="10a86-236">如果有足够的计算，可以在 100,000 个核心上运行 100,000 个内部循环，将处理时间缩短到以下时间之和：</span><span class="sxs-lookup"><span data-stu-id="10a86-236">Given enough compute, you can run the 100,000 inner loops on 100,000 cores, bringing processing time down to the sum of the following times:</span></span>

![](./assets/insurance-risk-assets/timing.png)

<span data-ttu-id="10a86-237">分发会增加一点，具体取决于完成方式；它可能像使用正确的参数构建小型作业一样简单，也可能像将 100K 文件复制到正确的位置那样复杂。</span><span class="sxs-lookup"><span data-stu-id="10a86-237">Distribution will increase a bit depending on how that is done; it may be as simple as constructing a small job with the right parameters or as complex as copying 100K files to the right places.</span></span> <span data-ttu-id="10a86-238">如果可以使用 HD Insight 中的 Apache Spark、Azure Databricks 或你自己的部署来分发结果聚合，则甚至可以加快处理结果。</span><span class="sxs-lookup"><span data-stu-id="10a86-238">Processing results can even be sped up if you can distribute the result aggregation using Apache Spark from HD Insight, Azure Databricks, or your own deployment.</span></span> <span data-ttu-id="10a86-239">例如，计算平均值是一个简单的记住到目前为止看到的项数与总和的问题。</span><span class="sxs-lookup"><span data-stu-id="10a86-239">For example, computing averages is a simple matter of remembering the number of items seen so far and the sum.</span></span> <span data-ttu-id="10a86-240">其他计算可能在具有数千个核心的单台计算机上效果更好。</span><span class="sxs-lookup"><span data-stu-id="10a86-240">Other computations may work better on a single machine with thousands of cores.</span></span> <span data-ttu-id="10a86-241">对于这些，可以在 Azure 中使用支持 GPU 的计算机。</span><span class="sxs-lookup"><span data-stu-id="10a86-241">For those, you can make use of GPU enabled machines in Azure.</span></span>

<span data-ttu-id="10a86-242">大多数精算团队通过将其模型迁移到 Azure 来开始这一旅程。</span><span class="sxs-lookup"><span data-stu-id="10a86-242">Most actuarial teams start this journey by moving their models to Azure.</span></span> <span data-ttu-id="10a86-243">然后，他们收集流程中各个步骤的计时数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-243">They then collect timing data on the various steps in the process.</span></span> <span data-ttu-id="10a86-244">随后，他们将每个步骤的时钟时间按从最长到最短的运行时间进行排序。</span><span class="sxs-lookup"><span data-stu-id="10a86-244">They then sort the clock time for each step from longest to shortest elapsed time.</span></span> <span data-ttu-id="10a86-245">他们不会查看总执行时间，因为某些内容可能会消耗数千个核心小时数，但只有 20 分钟的运行时间。</span><span class="sxs-lookup"><span data-stu-id="10a86-245">They will not look at total execution time since something may consume thousands of core hours but only 20 minutes elapsed time.</span></span> <span data-ttu-id="10a86-246">对于每个运行时间最长的作业步骤，精算开发人员都会寻找既能减少运行时间又能获得正确结果的方法。</span><span class="sxs-lookup"><span data-stu-id="10a86-246">For each of the longest running job steps, the actuarial developers look for ways to decrease the elapsed time while getting the right results.</span></span> <span data-ttu-id="10a86-247">此过程会定期重复。</span><span class="sxs-lookup"><span data-stu-id="10a86-247">This process repeats regularly.</span></span> <span data-ttu-id="10a86-248">一些精算团队将设定目标运行时间，假设隔夜对冲分析的目标是在 8 小时内运行完成。</span><span class="sxs-lookup"><span data-stu-id="10a86-248">Some actuarial teams will set a target run time, let's say an overnight hedging analysis has a goal of running in under 8 hours.</span></span> <span data-ttu-id="10a86-249">一旦时间超过 8.25 小时，精算团队的某些部分将切换以改善分析中最长部分的时间。</span><span class="sxs-lookup"><span data-stu-id="10a86-249">As soon as the time creeps over 8.25 hours, some part of the actuarial team will switch over to improve the time of the longest piece in the analysis.</span></span> <span data-ttu-id="10a86-250">一旦他们将时间重新缩短到 7.5 小时内，他们就会切换回开发。</span><span class="sxs-lookup"><span data-stu-id="10a86-250">Once they get the time back under 7.5 hours, they switch back to development.</span></span> <span data-ttu-id="10a86-251">精算师返回和优化的启发方式会有所不同。</span><span class="sxs-lookup"><span data-stu-id="10a86-251">The heuristics to go back and optimize vary amongst actuaries.</span></span>

<span data-ttu-id="10a86-252">要运行所有这些，有几个选项。</span><span class="sxs-lookup"><span data-stu-id="10a86-252">To run all this, you have several options.</span></span> <span data-ttu-id="10a86-253">大多数精算软件都适用于计算网格。</span><span class="sxs-lookup"><span data-stu-id="10a86-253">Most actuarial software works with compute grids.</span></span> <span data-ttu-id="10a86-254">在本地和 Azure 上工作的网格使用 [HPC Pack](https://docs.microsoft.com/azure/virtual-machines/windows/hpcpack-cluster-options?WT.mc_id=riskmodel-docs-scseely)第三方包或自定义内容。</span><span class="sxs-lookup"><span data-stu-id="10a86-254">Grids that work on-premises and on Azure use either [HPC Pack](https://docs.microsoft.com/azure/virtual-machines/windows/hpcpack-cluster-options?WT.mc_id=riskmodel-docs-scseely), a third party package, or something custom.</span></span> <span data-ttu-id="10a86-255">针对 Azure 优化的网格将使用[虚拟机规模集](https://docs.microsoft.com/azure/virtual-machine-scale-sets/?WT.mc_id=riskmodel-docs-scseely)、[Batch](https://docs.microsoft.com/azure/batch/?WT.mc_id=riskmodel-docs-scseely) 或自定义内容。</span><span class="sxs-lookup"><span data-stu-id="10a86-255">Grids optimized for Azure will use [Virtual Machine Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/?WT.mc_id=riskmodel-docs-scseely), [Batch](https://docs.microsoft.com/azure/batch/?WT.mc_id=riskmodel-docs-scseely), or something custom.</span></span> <span data-ttu-id="10a86-256">如果选择使用规模集或 Batch，请确保查看其对低优先级 VM 的支持（[规模集](https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-use-low-priority?WT.mc_id=riskmodel-docs-scseely)低优先级文档、[Batch](https://docs.microsoft.com/azure/batch/batch-low-pri-vms?WT.mc_id=riskmodel-docs-scseely) 低优先级文档）。</span><span class="sxs-lookup"><span data-stu-id="10a86-256">If you choose to use either Scale Sets or Batch, make sure to look at their support for low priority VMs ([Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-use-low-priority?WT.mc_id=riskmodel-docs-scseely) low priority docs, [Batch](https://docs.microsoft.com/azure/batch/batch-low-pri-vms?WT.mc_id=riskmodel-docs-scseely) low priority docs).</span></span> <span data-ttu-id="10a86-257">低优先级 VM 是在硬件上运行的 VM，可以正常价格的一小部分租用。</span><span class="sxs-lookup"><span data-stu-id="10a86-257">A low priority VM is a VM running on hardware which you can rent for a fraction of the normal price.</span></span> <span data-ttu-id="10a86-258">提供较低价格的原因是，当容量需要时，低优先级 VM 可能被占用。</span><span class="sxs-lookup"><span data-stu-id="10a86-258">The lower price is available because low priority VMs may be preempted when capacity demands it.</span></span> <span data-ttu-id="10a86-259">如果时间预算有一些调整空间，则低优先级 VM 提供了降低建模运行价格的好方法。</span><span class="sxs-lookup"><span data-stu-id="10a86-259">If you have some wiggle room in your time budget, the low priority VMs provide a great way to reduce the price of a modeling run.</span></span>

<span data-ttu-id="10a86-260">如果需要协调多台计算机上的执行和部署，可能有一些在不同区域运行，你可以利用 CycleCloud。</span><span class="sxs-lookup"><span data-stu-id="10a86-260">If you need to coordinate the execution and deployment across many machines, perhaps with some running in different regions, you can take advantage of CycleCloud.</span></span> <span data-ttu-id="10a86-261">CycleCloud 无需额外费用。</span><span class="sxs-lookup"><span data-stu-id="10a86-261">CycleCloud costs nothing extra.</span></span> <span data-ttu-id="10a86-262">它可在必要时协调数据移动。</span><span class="sxs-lookup"><span data-stu-id="10a86-262">It orchestrates data movement when necessary.</span></span> <span data-ttu-id="10a86-263">这包括计算机的分配、监控和关闭。</span><span class="sxs-lookup"><span data-stu-id="10a86-263">This includes allocation, monitoring, and shut down of the machines.</span></span> <span data-ttu-id="10a86-264">它甚至可以处理低优先级的计算机，确保费用得到控制。</span><span class="sxs-lookup"><span data-stu-id="10a86-264">It can even handle low priority machines, making sure expenses are contained.</span></span> <span data-ttu-id="10a86-265">你甚至可以描述需要的计算机组合。</span><span class="sxs-lookup"><span data-stu-id="10a86-265">You can go so far as to describe the mix of machines you need.</span></span> <span data-ttu-id="10a86-266">例如，你可能需要一类计算机，但可以在任何具有 2 个或多个核心的版本上运行良好。</span><span class="sxs-lookup"><span data-stu-id="10a86-266">For example, maybe you need a class of machine but can run well on any version that has 2 or more cores.</span></span> <span data-ttu-id="10a86-267">Cycle 可以跨这些计算机类型分配核心。</span><span class="sxs-lookup"><span data-stu-id="10a86-267">Cycle can allocate cores across those machine types.</span></span>

## <a name="reporting-on-the-results"></a><span data-ttu-id="10a86-268">报告结果</span><span class="sxs-lookup"><span data-stu-id="10a86-268">Reporting on the Results</span></span>

<span data-ttu-id="10a86-269">一旦精算包运行并产生了结果，你将获得几个可提交给监管机构的报告。</span><span class="sxs-lookup"><span data-stu-id="10a86-269">Once the actuarial packages have run and produced their results, you will have several regulator ready reports.</span></span> <span data-ttu-id="10a86-270">你还会有大量新数据，你可能需要对其进行分析以生成监管机构或审计员不需要的其他见解。</span><span class="sxs-lookup"><span data-stu-id="10a86-270">You will also have a mountain of new data that you may want to analyze to generate insights not required by regulators or auditors.</span></span> <span data-ttu-id="10a86-271">你可能需要了解最佳客户的个人资料。</span><span class="sxs-lookup"><span data-stu-id="10a86-271">You may want to understand the profile of your best customers.</span></span> <span data-ttu-id="10a86-272">通过这些见解，可以告诉营销人员低成本客户的特点，以便营销和销售人员能够更快地找到他们。</span><span class="sxs-lookup"><span data-stu-id="10a86-272">Using insights, you can tell marketing what a low-cost customer looks like so that marketing and sales can find them faster.</span></span> <span data-ttu-id="10a86-273">同样，可以使用数据来发现哪些组从拥有保险中获益最多。</span><span class="sxs-lookup"><span data-stu-id="10a86-273">Likewise, you can use the data to discover which groups benefit the most from having the insurance.</span></span> <span data-ttu-id="10a86-274">例如，你可能会发现进行年度体检的人更早发现了早期健康问题。</span><span class="sxs-lookup"><span data-stu-id="10a86-274">For example, you may discover that people who take advantage of an annual physical found out about early stage health issues earlier.</span></span> <span data-ttu-id="10a86-275">这可为保险公司节省时间和资金。</span><span class="sxs-lookup"><span data-stu-id="10a86-275">This saves the insurance company time and money.</span></span> <span data-ttu-id="10a86-276">你可以使用此数据来推动客户群的行为。</span><span class="sxs-lookup"><span data-stu-id="10a86-276">You can use that data to drive behavior in your customer base.</span></span>

<span data-ttu-id="10a86-277">要做到这一点，需要访问大量的数据科学工具以及可视化效果的某些部分。</span><span class="sxs-lookup"><span data-stu-id="10a86-277">To do this, you will want access to plenty of data science tooling as well as some pieces for visualization.</span></span> <span data-ttu-id="10a86-278">根据要进行的调查量，可以从可通过 Azure 市场预配的 [ Data Science VM](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/overview?WT.mc_id=riskmodel-docs-scseely) 开始。</span><span class="sxs-lookup"><span data-stu-id="10a86-278">Depending on how much investigation you want to do, you can start with [a Data Science VM](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/overview?WT.mc_id=riskmodel-docs-scseely) which can be provisioned from the Azure Marketplace.</span></span> <span data-ttu-id="10a86-279">这些虚拟机具有 Windows 和 Linux 版本。</span><span class="sxs-lookup"><span data-stu-id="10a86-279">These VMs have both Windows and Linux versions.</span></span> <span data-ttu-id="10a86-280">安装后，你会发现 Microsoft R Open、Microsoft ML Server、Anaconda、Jupyter 和其他工具已准备就绪。</span><span class="sxs-lookup"><span data-stu-id="10a86-280">Installed, you will find Microsoft R Open, Microsoft ML Server, Anaconda, Jupyter, and other tools ready to go.</span></span> <span data-ttu-id="10a86-281">投入一点 R 或 Python 以实现数据可视化并与同事共享见解。</span><span class="sxs-lookup"><span data-stu-id="10a86-281">Throw in a little R or Python to visualize the data and share insights with your colleagues.</span></span>

<span data-ttu-id="10a86-282">如果需要进行更多分析，可以通过 HDInsight 或 Databricks 使用 Spark、Hadoop 等 Apache 数据科学工具。</span><span class="sxs-lookup"><span data-stu-id="10a86-282">If you need to do more analysis, you can use Apache data science tools like Spark, Hadoop, and others via either HDInsight or Databricks.</span></span> <span data-ttu-id="10a86-283">当需要定期进行分析并且希望自动执行工作流时，需多使用这些。</span><span class="sxs-lookup"><span data-stu-id="10a86-283">Use these more for when the analysis needs to be done regularly and you want to automate the workflow.</span></span> <span data-ttu-id="10a86-284">这对于大型数据集的实时分析也很有用。</span><span class="sxs-lookup"><span data-stu-id="10a86-284">This is also useful for live analysis of large datasets.</span></span>

<span data-ttu-id="10a86-285">一旦找到一些有趣的内容，就需要显示结果。</span><span class="sxs-lookup"><span data-stu-id="10a86-285">Once you have found something interesting, you need to present the results.</span></span> <span data-ttu-id="10a86-286">许多精算师将首先获取示例结果并将其插入 Excel 中以创建图表、图形和其他可视化效果。</span><span class="sxs-lookup"><span data-stu-id="10a86-286">Many actuaries will start by taking the sample results and plugging them into Excel to create charts, graphs, and other visualizations.</span></span> <span data-ttu-id="10a86-287">如果需要一个同样有良好界面来钻取数据的工具，不妨看看 [Power BI](https://docs.microsoft.com/power-bi/?WT.mc_id=riskmodel-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="10a86-287">If you want something that also has a nice interface for drilling into the data, take a look at [Power BI](https://docs.microsoft.com/power-bi/?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="10a86-288">Power BI 可以提供一些很好的可视化效果，显示源数据，并允许通过添加[有序、带批注的书签](https://docs.microsoft.com/power-bi/desktop-bookmarks?WT.mc_id=riskmodel-docs-scseely)向读者解释数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-288">Power BI can make some nice visualizations, display the source data, and it allows for explaining the data to the reader through the addition of [ordered, annotated bookmarks](https://docs.microsoft.com/power-bi/desktop-bookmarks?WT.mc_id=riskmodel-docs-scseely).</span></span>

## <a name="data-retention"></a><span data-ttu-id="10a86-289">数据保留</span><span class="sxs-lookup"><span data-stu-id="10a86-289">Data Retention</span></span>

<span data-ttu-id="10a86-290">引入系统的大部分数据都需要保留以供将来审核。</span><span class="sxs-lookup"><span data-stu-id="10a86-290">Much of the data you bring into the system needs to be preserved for future audits.</span></span> <span data-ttu-id="10a86-291">通常要求数据保留 7 到 10 年，具体要求各不相同。</span><span class="sxs-lookup"><span data-stu-id="10a86-291">Data retention requirements typically range from 7 to 10 years, but requirements vary.</span></span> <span data-ttu-id="10a86-292">保留内容最少包括：</span><span class="sxs-lookup"><span data-stu-id="10a86-292">Minimal retention involves:</span></span>

- <span data-ttu-id="10a86-293">模型原始输入的快照。</span><span class="sxs-lookup"><span data-stu-id="10a86-293">Snapshot of the original inputs to the model.</span></span> <span data-ttu-id="10a86-294">这包括资产、负债、假设、ESG 和其他输入。</span><span class="sxs-lookup"><span data-stu-id="10a86-294">This includes assets, liabilities, assumptions, ESGs, and other inputs.</span></span>
- <span data-ttu-id="10a86-295">最终输出的快照。</span><span class="sxs-lookup"><span data-stu-id="10a86-295">Snapshot of the final outputs.</span></span> <span data-ttu-id="10a86-296">这包括用于创建向监管机构提交的报告的任何数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-296">This includes any data used to create reports presented to regulatory bodies.</span></span>
- <span data-ttu-id="10a86-297">其他重要的中间结果。</span><span class="sxs-lookup"><span data-stu-id="10a86-297">Other important, intermediate results.</span></span> <span data-ttu-id="10a86-298">审计员会问为什么你的模型会得出一些结果。</span><span class="sxs-lookup"><span data-stu-id="10a86-298">An auditor will ask why your model came up with some result.</span></span> <span data-ttu-id="10a86-299">你需要保留有关模型为何做出某些选择或提供特定数字的证据。</span><span class="sxs-lookup"><span data-stu-id="10a86-299">You need to retain evidence about why the model made certain choices or came up with particular numbers.</span></span> <span data-ttu-id="10a86-300">许多保险公司将选择保留用于从原始输入生成最终输出的二进制文件。</span><span class="sxs-lookup"><span data-stu-id="10a86-300">Many insurers will choose to keep the binaries used to produce the final outputs from the original inputs.</span></span> <span data-ttu-id="10a86-301">之后，当被问及时，他们会重新运行模型以获得中间结果的新副本。</span><span class="sxs-lookup"><span data-stu-id="10a86-301">Then, when questioned, they rerun the model to get a fresh copy of the intermediate results.</span></span> <span data-ttu-id="10a86-302">如果输出匹配，则中间文件还应包含所需的解释。</span><span class="sxs-lookup"><span data-stu-id="10a86-302">If the outputs match, then the intermediate files should also contain the explanations they need.</span></span>

<span data-ttu-id="10a86-303">在模型运行期间，精算师使用数据传递机制来处理运行中的请求负载。</span><span class="sxs-lookup"><span data-stu-id="10a86-303">During the model run, the actuaries use data delivery mechanisms that can handle the request load from the run.</span></span> <span data-ttu-id="10a86-304">一旦运行完成并且不再需要数据，他们就会保留一些数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-304">Once the run is complete and data is no longer needed, they preserve some of the data.</span></span> <span data-ttu-id="10a86-305">至少，保险公司应保留输入和运行时配置以满足任何可再现性要求。</span><span class="sxs-lookup"><span data-stu-id="10a86-305">At a minimum, an insurer should preserve the inputs and the runtime configuration for any reproducibility requirements.</span></span> <span data-ttu-id="10a86-306">数据库将保存到 Azure Blob 存储中的备份，并且服务器将关闭。</span><span class="sxs-lookup"><span data-stu-id="10a86-306">Databases are preserved to backups in Azure Blob Storage and servers are shut down.</span></span> <span data-ttu-id="10a86-307">高速存储上的数据也将移动到成本较低的 Azure Blob 存储。</span><span class="sxs-lookup"><span data-stu-id="10a86-307">Data on high speed storage also moves to the less expensive Azure Blob Storage.</span></span> <span data-ttu-id="10a86-308">进入 Blob 存储后，可以选择用于每个 blob 的数据层：热、冷或存档。</span><span class="sxs-lookup"><span data-stu-id="10a86-308">Once in Blob Storage, you can choose the data tier used for each blob: hot, cool, or archive.</span></span> <span data-ttu-id="10a86-309">热存储适用于频繁访问的文件。</span><span class="sxs-lookup"><span data-stu-id="10a86-309">Hot storage works well for frequently accessed files.</span></span> <span data-ttu-id="10a86-310">冷存储针对不频繁的数据访问进行了优化。</span><span class="sxs-lookup"><span data-stu-id="10a86-310">Cool storage is optimized for infrequent data access.</span></span> <span data-ttu-id="10a86-311">存档存储最适合保存可审核的文件，但节省的价格需要付出延迟成本：存档层数据延迟以小时为单位。</span><span class="sxs-lookup"><span data-stu-id="10a86-311">Archive storage is best for holding auditable files but the price savings comes at a latency cost: archived tier data latency is measured in hours.</span></span> <span data-ttu-id="10a86-312">阅读 [Azure Blob 存储：热、冷和存档存储层](https://docs.microsoft.com/azure/storage/blobs/storage-blob-storage-tiers?WT.mc_id=riskmodel-docs-scseely)以全面了解不同的存储层。</span><span class="sxs-lookup"><span data-stu-id="10a86-312">Read [Azure Blob storage: Hot, cool, and archive storage tiers](https://docs.microsoft.com/azure/storage/blobs/storage-blob-storage-tiers?WT.mc_id=riskmodel-docs-scseely) to fully understand the different storage tiers.</span></span> <span data-ttu-id="10a86-313">可以使用生命周期管理来管理数据从创建到删除的整个过程。</span><span class="sxs-lookup"><span data-stu-id="10a86-313">You can manage data from creation through deletion with lifecycle management.</span></span> <span data-ttu-id="10a86-314">blob 的 URI 保持静态，但 blob 存储的位置会随着时间的推移而变得更便宜。</span><span class="sxs-lookup"><span data-stu-id="10a86-314">URIs for blobs stay static, but where the blob is stored gets cheaper over time.</span></span> <span data-ttu-id="10a86-315">此功能将为众多 Azure 存储用户节省大量资金并减少许多麻烦。</span><span class="sxs-lookup"><span data-stu-id="10a86-315">This feature will save a lot of money and headaches for many users of Azure Storage.</span></span> <span data-ttu-id="10a86-316">可以在[管理 Azure Blob 存储生命周期](https://docs.microsoft.com/azure/storage/common/storage-lifecycle-managment-concepts?WT.mc_id=riskmodel-docs-scseely)中了解详细信息。</span><span class="sxs-lookup"><span data-stu-id="10a86-316">You can learn about the ins and outs in [Managing the Azure Blob Storage Lifecycle](https://docs.microsoft.com/azure/storage/common/storage-lifecycle-managment-concepts?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="10a86-317">可以自动删除文件的功能非常棒：这意味着你不会因为引用超出范围的文件而意外扩展审核，因为文件本身可以自动删除。</span><span class="sxs-lookup"><span data-stu-id="10a86-317">The fact that you can automatically delete files is wonderful: it means that you won't accidentally expand an audit by referring to a file that is out of scope because the file itself can be removed automatically.</span></span>

## <a name="next-steps"></a><span data-ttu-id="10a86-318">后续步骤</span><span class="sxs-lookup"><span data-stu-id="10a86-318">Next steps</span></span>

<span data-ttu-id="10a86-319">如果运行的精算系统具有本地网格实现，则该网格实现也可能在 Azure 上运行。</span><span class="sxs-lookup"><span data-stu-id="10a86-319">If the actuarial system you run has a on premises grid implementation, that grid implementation will likely run on Azure too.</span></span> <span data-ttu-id="10a86-320">对于某些供应商，他们拥有以超大规模运行的专用 Azure 实现。</span><span class="sxs-lookup"><span data-stu-id="10a86-320">For some vendors, they have specialized Azure implementations that run at hyperscale.</span></span> <span data-ttu-id="10a86-321">作为迁移到 Azure 的一部分，也可以将内部工具迁移过来。</span><span class="sxs-lookup"><span data-stu-id="10a86-321">As part of the move to Azure, move your internal tooling over as well.</span></span> <span data-ttu-id="10a86-322">各地的精算师都发现，他们的数据科学技能在其笔记本电脑或大环境中效果很好。</span><span class="sxs-lookup"><span data-stu-id="10a86-322">Actuaries everywhere have been finding that their data science skills work well on their laptop or with a large environment.</span></span> <span data-ttu-id="10a86-323">看看你的团队已经做了哪些：也许你有一些东西使用深度学习，但需要花费数小时或数天才能在一个 GPU 上运行。</span><span class="sxs-lookup"><span data-stu-id="10a86-323">Look for things your team already does: maybe you have something that uses deep learning but takes hours or days to run on one GPU.</span></span> <span data-ttu-id="10a86-324">尝试在具有 4 个高端 GPU 的计算机上运行相同的工作负荷，并查看运行时间；很有可能你会看到显著的加速效果。</span><span class="sxs-lookup"><span data-stu-id="10a86-324">Try running the same workload on a machine with 4 high end GPUs and look at the run times; odds are good you will see significant speedups for things you already have.</span></span>

<span data-ttu-id="10a86-325">随着情况的改进，请确保还构建出一些数据同步以提供建模数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-325">As things improve, make sure that you also build out some data synchronization to feed the modeling data.</span></span> <span data-ttu-id="10a86-326">在数据准备就绪之前，无法启动模型运行。</span><span class="sxs-lookup"><span data-stu-id="10a86-326">A model run cannot start until the data is ready.</span></span> <span data-ttu-id="10a86-327">这可能需要添加一些工作，以便只发送已更改的数据。</span><span class="sxs-lookup"><span data-stu-id="10a86-327">This may involve adding some effort so that you send only data which has changed.</span></span> <span data-ttu-id="10a86-328">实际的方法也取决于数据大小：更新几 MB 可能不是什么大问题，但减少千兆字节的上载量将大大加快速度。</span><span class="sxs-lookup"><span data-stu-id="10a86-328">The actual approach depends on the data size too: updating a few MB maybe isn't a big deal but reducing the number of gigabyte uploads will speed things a lot.</span></span>

### <a name="tutorials"></a><span data-ttu-id="10a86-329">教程</span><span class="sxs-lookup"><span data-stu-id="10a86-329">Tutorials</span></span>

- <span data-ttu-id="10a86-330">R 开发人员：[使用 Azure Batch 运行并行 R 模拟](https://docs.microsoft.com/azure/batch/tutorial-r-doazureparallel?WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="10a86-330">R Developers: [Run a parallel R simulation with Azure Batch](https://docs.microsoft.com/azure/batch/tutorial-r-doazureparallel?WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="10a86-331">介绍如何使用 Azure Function 与存储进行交互的教程：[使用 Azure Functions 将图像上载到 Blob 存储](https://docs.microsoft.com/azure/functions/tutorial-static-website-serverless-api-with-database?tutorial-step=2&WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="10a86-331">Tutorial to show how to use an Azure Function to interact with storage: [Upload images to Blob storage with Azure Functions](https://docs.microsoft.com/azure/functions/tutorial-static-website-serverless-api-with-database?tutorial-step=2&WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="10a86-332">使用 Databricks 执行 ETL 操作：[使用 Azure Databricks 提取、转换和加载数据](https://docs.microsoft.com/azure/azure-databricks/databricks-extract-load-sql-data-warehouse?WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="10a86-332">ETL with Databricks: [Extract, transform, and load data using Azure Databricks](https://docs.microsoft.com/azure/azure-databricks/databricks-extract-load-sql-data-warehouse?WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="10a86-333">使用 HDInsight 执行 ETL 操作：[在 Azure HDInsight 上使用 Apache Hive 提取、转换和加载数据](https://docs.microsoft.com/azure/hdinsight/hdinsight-analyze-flight-delay-data-linux?toc=%2Fen-us%2Fazure%2Fhdinsight%2Fhadoop%2FTOC.json&amp;bc=%2Fen-us%2Fazure%2Fbread%2Ftoc.json&WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="10a86-333">ETL with HDInsight: [Extract, transform, and load data using Apache Hive on Azure HDInsight](https://docs.microsoft.com/azure/hdinsight/hdinsight-analyze-flight-delay-data-linux?toc=%2Fen-us%2Fazure%2Fhdinsight%2Fhadoop%2FTOC.json&amp;bc=%2Fen-us%2Fazure%2Fbread%2Ftoc.json&WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="10a86-334">Data Science VM 操作方法 (Linux)：[https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/linux-dsvm-walkthrough](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/linux-dsvm-walkthrough?WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="10a86-334">Data Science VM How To (Linux): [https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/linux-dsvm-walkthrough](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/linux-dsvm-walkthrough?WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="10a86-335">Data Science VM 操作方法 (Windows)：[https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/vm-do-ten-things](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/vm-do-ten-things?WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="10a86-335">Data Science VM How To (Windows): [https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/vm-do-ten-things](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/vm-do-ten-things?WT.mc_id=riskmodel-docs-scseely)</span></span>
